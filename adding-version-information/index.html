<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,100,700" media="all">
        
        
        
        <link rel="shortcut icon" href="../favicon.ico">
        

	<title>Adding version information - elmah.io Documentation</title>

        <link href="/../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="/../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="/../css/base.css" rel="stylesheet">
        <link href="/../style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
        <script src="/js/search.js"></script>
        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-42575460-4', 'docs.elmah.io');
            ga('send', 'pageview');
        </script>
        
        <script src="/../js/jquery-1.10.2.min.js"></script>
    </head>

    <body>
		
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="https://elmah.io/">elmah.io</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
                <li><a href="https://elmah.io/features/" id="NavFeatures">Features</a></li>
                <li><a href="https://elmah.io/about/" id="NavAbout">About</a></li>
                <li><a href="https://elmah.io/pricing/" id="NavPricing">Pricing</a></li>
                <li><a href="http://docs.elmah.io/" id="NavDocs">Docs</a></li>
                <li><a href="http://blog.elmah.io/" id="NavBlog">Blog</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                    <li class="visible-xs">
                        <a href="/authentication/redirect/Twitter" class="pull-left"><span class="fa fa-twitter icon-2x"></span></a>
                        <a href="/authentication/redirect/Facebook" class="pull-left"><span class="fa fa-facebook icon-2x"></span></a>
                        <a href="/authentication/redirect/Google" class="pull-left"><span class="fa fa-google-plus icon-2x"></span></a>
                        <a href="/authentication/redirect/windowslive" class="pull-left"><span class="fa fa-windows icon-2x"></span></a>
                    </li>
                    <li class="hidden-xs"><span class="navbar-text text-muted">Sign in:</span></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/Twitter"><span class="fa fa-twitter"></span></a></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/Facebook"><span class="fa fa-facebook"></span></a></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/Google"><span class="fa fa-google-plus"></span></a></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/windowslive"><span class="fa fa-windows"></span></a></li>
                </ul>
        </div>
    </div>
</div>

        <div class="container">
            
		
            <div class="col-md-3"><div class="bs-sidebar hidden-print" role="complementary">
	
    <div class="icon-in-input">
        <input type="text" class="form-control" id="search" onclick="initSearchFunctionality()"/>
        <button type="button" class="fa fa-search"></button>
    </div>
    <h4 id="searchResultHeader">Search result</h4>
    <div id="searchResult">
    <ul class="nav bs-sidenav">
    </ul>
    <hr/>
    </div>
	
    
			<h4 href="#" >Docs</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="..">Home</a>
				</li>
			
			</ul>
	
    
			<h4 href="#" >Installation</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="../logging-to-elmah-io-from-elmah/">Logging from ELMAH</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-aspnet-mvc/">Logging from ASP.NET MVC</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-web-api/">Logging from Web API</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-serilog/">Logging from Serilog</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-log4net/">Logging from log4net</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-nlog/">Logging from NLog</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-nancy/">Logging from Nancy</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-servicestack/">Logging from ServiceStack</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-blogengine-net/">Logging from BlogEngine.NET</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-umbraco/">Logging from Umbraco</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-jsnlog/">Logging from JSNLog</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-console-application/">Logging from Console</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-sitefinity/">Logging from Sitefinity</a>
				</li>
			
				<li >
					<a href="../configure-elmah-io-manually/">Configure elmah.io manually</a>
				</li>
			
				<li >
					<a href="../configure-elmah-io-from-code/">Configure elmah.io from code</a>
				</li>
			
			</ul>
	
    
			<h4 href="#" >Apps</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="../elmah-io-apps-slack/">Slack</a>
				</li>
			
				<li >
					<a href="../elmah-io-apps-hipchat/">HipChat</a>
				</li>
			
				<li >
					<a href="../elmah-io-apps-github/">GitHub</a>
				</li>
			
				<li >
					<a href="../elmah-io-apps-botbuster/">BotBuster</a>
				</li>
			
			</ul>
	
    
			<h4 href="#" >Help</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="../integrate-elmah-io-with-slack/">Integrating with Slack manually</a>
				</li>
			
				<li >
					<a href="../integrate-elmah-io-with-hipchat/">Integrating with HipChat manually</a>
				</li>
			
				<li >
					<a href="../integrate-elmah-io-with-zapier/">Integrating with Zapier</a>
				</li>
			
				<li >
					<a href="../logging-custom-data/">Logging custom data</a>
				</li>
			
				<li >
					<a href="../logging-errors-programmatically/">Logging errors programmatically</a>
				</li>
			
				<li >
					<a href="../logging-through-a-http-proxy/">Logging through a HTTP proxy</a>
				</li>
			
				<li >
					<a href="../logging-to-multiple-elmah-logs/">Logging to multiple logs</a>
				</li>
			
				<li >
					<a href="../remove-sensitive-form-data/">Remove sensitive form data</a>
				</li>
			
				<li >
					<a href="../use-extended-user-details-without-email-as-id/">Use Extended User Details without Email as Id</a>
				</li>
			
				<li >
					<a href="../use-multiple-logs-for-different-environments/">Use multiple logs for different environments</a>
				</li>
			
				<li >
					<a href="../using-the-elmah-io-extension-for-visual-studio/">Using the elmah.io extension for Visual Studio</a>
				</li>
			
				<li >
					<a href="../handle-elmah-io-downtime/">Handle elmah.io downtime</a>
				</li>
			
				<li class="active">
					<a href="./">Adding version information</a>
				</li>
			
				<li >
					<a href="../elmah-and-custom-errors/">ELMAH and custom errors</a>
				</li>
			
			</ul>
	
</div></div>
            <div class="col-md-9" role="main" style="border-left: 1px solid #eee;">

<h1 id="adding-version-information">Adding Version Information</h1>
<p>Almost every piece of software have some sort of version. Whether it's a nice looking <a href="http://semver.org/">SemVer</a> string or a simple timestamp, being able to distinguish one version from the other is important. elmah.io supports sending version information from your application in every message logged.</p>
<h2 id="version-numbers-on-the-ui">Version Numbers on the UI</h2>
<p>Let's start by looking at how version numbers are represented in the elmah.io UI. Every message contains a version property as illustrated below:</p>
<p><img alt="Error Details with Version Number" src="../images/versiondetails.png" /></p>
<p>The error is logged by an application with version number 1.0.0. Looking at another error, the version number may look different:</p>
<p><img alt="Error Details with Other Version Number" src="../images/versiondetails2.png" /></p>
<p>This way, you will be able to see which version of your software that logged each message.</p>
<p>Having the version number on the message, opens up some interesting search possibilities. Imagine that you want to search for every message logged by 1.0.* versions of your software, including release candidates etc. Simply do a search in the search box like this:</p>
<p><img alt="Search for Versions" src="../images/versionsearch.png" /></p>
<p>The example above finds every message logged from 1.0.0, 1.0.0-rc1, 1.0.1, etc.</p>
<h2 id="adding-version-numbers">Adding Version Numbers</h2>
<p>How you choose to represent version numbers in your system is really up to you. elmah.io doesn't require SemVer, even though we strongly recommend you to use it. Version is a simple string in our <a href="../elmah.io/api">API</a>, which means that you can send anything from SemVer to a stringified timestamp.</p>
<p>Adding a version number to every message logged in elmah.io, is easy as 1-2-3. If you're using our API, there's a property named <code>version</code> where you can put the version of your application. Chances are that you are using one of the integrations like ELMAH, log4net or Serilog. In fact there's multiple ways to send a version number to elmah.io.</p>
<h3 id="globally-using-elmah">Globally using ELMAH</h3>
<p>You probably want to attach the same version number on every message logged in elmah.io. The easiest way to achieve that, is to create a global event handler for the OnMessage event, which is triggered every time the elmah.io client logs a message to elmah.io:</p>
<pre><code class="csharp">Elmah.ErrorLog.GetDefault(null); // Forces creation of logger client
var logger = ErrorLog.Client;
logger.OnMessage += (sender, args) =&gt;
{
    args.Message.Version = &quot;1.2.3&quot;; // Requires elmah.io.core version &gt;= 2.0.26
}
</code></pre>

<p>In the example, the message send of to elmah.io is decorated with the version numer <code>1.2.3</code> You will need to replace this with the value of an app setting, the assembly info or whatever strategy you've used to make the version number available to your code.</p>
<h3 id="trycatch-using-elmah">Try/catch using ELMAH</h3>
<p>If you're logging errors to elmah.io in catch blocks, logging the version number can be done using a similar approach to the above:</p>
<pre><code class="csharp">try
{
    CallSomeBusinessLogic(inputValue);
}
catch (Exception e)
{
    e.Data.Add(&quot;X-ELMAHIO-VERSION&quot;, &quot;1.2.3&quot;);
    ErrorSignal.FromCurrentContext().Raise(e);
}
</code></pre>

<p>In this case, the code at this point doesn't know anything about elmah.io. Luckily, there's an alternative to the Version property, by putting a custom element in the Data dictionary on Exception. The exact name of the key must be <code>X-ELMAHIO-VERSION</code> for elmah.io to interpret this as the version number.</p>
<h3 id="using-log4net">Using log4net</h3>
<p>log4net supports the concept of customer properties in various ways. Since log4net properties are converted to custom properties in elmah.io, the easiest way to add a version number of every message logged through log4net, is by configuring a global property somewhere in your initialization code:</p>
<pre><code class="csharp">log4net.GlobalContext.Properties[&quot;X-ELMAHIO-VERSION&quot;] = &quot;1.2.3&quot;;
</code></pre>

<p>The property name is equal to the custom element we used in the last section.</p>
<p>log4net supports custom properties in the context of a log call as well. To do that, put the <code>X-ELMAHIO-VERSION</code> property in the <code>ThreadContext</code> before logging to log4net:</p>
<pre><code class="csharp">log4net.ThreadContext.Properties[&quot;X-ELMAHIO-VERSION&quot;] = &quot;1.2.3&quot;;
log4net.Error(&quot;This is an error message&quot;);
</code></pre>

<h3 id="using-nlog">Using NLog</h3>
<p>In progress.</p>
<h3 id="using-serilog">Using Serilog</h3>
<p>In progress.</p>


<br/><br/>
<h2>Comments</h2>
<hr/>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'elmahioblog';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div>
		
		
			
        </div>

    <footer class="col-md-12">
        
    </footer>


        <script src="/../js/bootstrap-3.0.3.min.js"></script>
        <script src="/../js/highlight.pack.js"></script>
        <script src="/../js/base.js"></script>
    </body>
</html>