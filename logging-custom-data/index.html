<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,100,700" media="all">
        
        
        
        <link rel="shortcut icon" href="../favicon.ico">
        

	<title>Logging custom data - elmah.io Documentation</title>

        <link href="/../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="/../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="/../css/base.css" rel="stylesheet">
        <link href="/../style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
        <script src="/js/search.js"></script>
        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-42575460-4', 'docs.elmah.io');
            ga('send', 'pageview');
        </script>
        
        <script src="/../js/jquery-1.10.2.min.js"></script>
    </head>

    <body>
		
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="https://elmah.io/">elmah.io</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
                <li><a href="https://elmah.io/features/" id="NavFeatures">Features</a></li>
                <li><a href="https://elmah.io/about/" id="NavAbout">About</a></li>
                <li><a href="https://elmah.io/pricing/" id="NavPricing">Pricing</a></li>
                <li><a href="http://docs.elmah.io/" id="NavDocs">Docs</a></li>
                <li><a href="http://blog.elmah.io/" id="NavBlog">Blog</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                    <li class="visible-xs">
                        <a href="/authentication/redirect/Twitter" class="pull-left"><span class="fa fa-twitter icon-2x"></span></a>
                        <a href="/authentication/redirect/Facebook" class="pull-left"><span class="fa fa-facebook icon-2x"></span></a>
                        <a href="/authentication/redirect/Google" class="pull-left"><span class="fa fa-google-plus icon-2x"></span></a>
                        <a href="/authentication/redirect/windowslive" class="pull-left"><span class="fa fa-windows icon-2x"></span></a>
                    </li>
                    <li class="hidden-xs"><span class="navbar-text text-muted">Sign in:</span></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/Twitter"><span class="fa fa-twitter"></span></a></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/Facebook"><span class="fa fa-facebook"></span></a></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/Google"><span class="fa fa-google-plus"></span></a></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/windowslive"><span class="fa fa-windows"></span></a></li>
                </ul>
        </div>
    </div>
</div>

        <div class="container">
            
		
            <div class="col-md-3"><div class="bs-sidebar hidden-print" role="complementary">
	
    <div class="icon-in-input">
        <input type="text" class="form-control" id="search" onclick="initSearchFunctionality()"/>
        <button type="button" class="fa fa-search"></button>
    </div>
    <h4 id="searchResultHeader">Search result</h4>
    <div id="searchResult">
    <ul class="nav bs-sidenav">
    </ul>
    <hr/>
    </div>
	
    
			<h4 href="#" >Docs</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="..">Home</a>
				</li>
			
			</ul>
	
    
			<h4 href="#" >Installation</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="../logging-to-elmah-io-from-elmah/">Logging from ELMAH</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-web-api/">Logging from Web API</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-serilog/">Logging from Serilog</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-log4net/">Logging from log4net</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-nlog/">Logging from NLog</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-nancy/">Logging from Nancy</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-servicestack/">Logging from ServiceStack</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-blogengine-net/">Logging from BlogEngine.NET</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-umbraco/">Logging from Umbraco</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-jsnlog/">Logging from JSNLog</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-console-application/">Logging from Console</a>
				</li>
			
				<li >
					<a href="../configure-elmah-io-manually/">Configure elmah.io manually</a>
				</li>
			
				<li >
					<a href="../configure-elmah-io-from-code/">Configure elmah.io from code</a>
				</li>
			
			</ul>
	
    
			<h4 href="#" >Integrations</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="../integrate-elmah-io-with-slack/">Slack</a>
				</li>
			
				<li >
					<a href="../integrate-elmah-io-with-hipchat/">HipChat</a>
				</li>
			
				<li >
					<a href="../integrate-elmah-io-with-zapier/">Zapier</a>
				</li>
			
			</ul>
	
    
			<h4 href="#" >Help</h4>
			<ul class="nav bs-sidenav">
			
				<li class="active">
					<a href="./">Logging custom data</a>
				</li>
			
				<li >
					<a href="../logging-errors-programmatically/">Logging errors programmatically</a>
				</li>
			
				<li >
					<a href="../logging-through-a-http-proxy/">Logging through a HTTP proxy</a>
				</li>
			
				<li >
					<a href="../logging-to-multiple-elmah-logs/">Logging to multiple logs</a>
				</li>
			
				<li >
					<a href="../remove-sensitive-form-data/">Remove sensitive form data</a>
				</li>
			
				<li >
					<a href="../use-extended-user-details-without-email-as-id/">Use Extended User Details without Email as Id</a>
				</li>
			
				<li >
					<a href="../use-multiple-logs-for-different-environments/">Use multiple logs for different environments</a>
				</li>
			
				<li >
					<a href="../handle-elmah-io-downtime/">Handle elmah.io downtime</a>
				</li>
			
			</ul>
	
</div></div>
            <div class="col-md-9" role="main" style="border-left: 1px solid #eee;">

<h1 id="logging-custom-data">Logging custom data</h1>
<p>ELMAH stores a lot of contextual information when an error occur. Things like cookies, stack trace, server variables and much more are stored to ease debugging the error at a later point in time. Most error log implementations for ELMAH doesn't support custom variables. Luckily, this is not the case for the elmah.io client.</p>
<p>Let’s look at some code. You have two options of decorating your errors with custom variables.</p>
<h3 id="use-the-data-dictionary-on-nets-exception-type">Use the <a href="https://msdn.microsoft.com/en-us/library/system.exception.data%28v=vs.110%29.aspx">Data</a> dictionary on .NET’s Exception type</h3>
<p>I talk to a lot of developers and not all of them know about the wonderful world of the Data dictionary. All exceptions in .NET contains a property named <code>Data</code> and of type <code>IDictionary</code>. The <code>Data</code> dictionary is intended for user-defined information about the exception. The elmah.io client iterates through key/values in this dictionary and ship it off to <a href="https://elmah.io/api">elmah.io’s API</a>. To log custom data using <code>Data</code>, just add a new key/value pair to the <code>Data</code> dictionary:</p>
<pre><code class="csharp">try
{
    CallSomeBusinessLogic(inputValue);
}
catch (Exception e)
{
    e.Data.Add(&quot;InputValueWas&quot;, inputValue);
    ErrorSignal.FromCurrentContext().Raise(e);
}
</code></pre>

<p>In the example I add a custom variable named <code>InputValueWas</code> with the value of the <code>inputValue</code> variable. This way I will be able to see which input value caused the exception.</p>
<h3 id="use-the-onmessage-hook-in-the-elmahio-client">Use the <code>OnMessage</code> hook in the elmah.io client</h3>
<p>You may not use ELMAH’s ErrorSignal feature, but rely on ELMAH to log uncaught exceptions only. In this scenario you probably don’t have access to the thrown exception. The elmah.io client offers a hook for you to be able to execute code every time something is logged:</p>
<pre><code class="csharp">Logger.OnMessage += (sender, args) =&gt;
{
    if (args.Message.Data == null) args.Message.Data = new List&lt;Item&gt;();
    args.Message.Data.Add(new Item { Key = &quot;SomeOtherVariable&quot;, Value = someVariable });
};
</code></pre>

<p>You may not have seen the Logger type of elmah.io before, but what’s important to know right now is, that Logger is responsible for logging messages to the elmah.io API. Another new term here is Message. A message is the type encapsulating all of the information about the thrown exception.</p>
<p>In the code example I subscribe a new event handler to the <code>OnMessage</code> event. This tells the elmah.io client to execute your event handler, before actually logging an exception to elmah.io. I use the event to add a custom variable to the <code>Data</code> dictionary of the message logged to elmah.io.</p>
<h3 id="looking-at-your-custom-variables">Looking at your custom variables</h3>
<p>Logging custom data doesn’t really make anything easier, unless you have a place to show them. Luckily for you, we have thought about that and now offers a new tab on the error details:</p>
<p><img alt="Custom Variables" src="../images/looking_at_custom_variables.gif" /></p>
<p>Like the content in the other tabs of the error details, you will be able to filter results by the variable key.</p>


<br/><br/>
<h2>Comments</h2>
<hr/>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'elmahioblog';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div>
		
		
			
        </div>

    <footer class="col-md-12">
        
    </footer>


        <script src="/../js/bootstrap-3.0.3.min.js"></script>
        <script src="/../js/highlight.pack.js"></script>
        <script src="/../js/base.js"></script>
    </body>
</html>