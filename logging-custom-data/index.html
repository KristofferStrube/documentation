<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <meta name="author" content="Thomas Ardal">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@elmah_io">
    <meta name="twitter:creator" content="@elmah_io">
    <meta name="twitter:title" content="Logging custom data | elmah.io">
    
    
    <meta property="og:title" content="Logging custom data | elmah.io">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.elmah.io/logging-custom-data/">
    
    <meta property="fb:app_id" content="218008838347208" />
    <title>Logging custom data | elmah.io</title>
    <link rel="canonical" href="https://docs.elmah.io/logging-custom-data/">
    <link rel="shortcut icon" href="../.././favicon.ico">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../.././assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../.././assets/fonts/font-awesome/css/all.min.css">
    <link rel="stylesheet" href="../.././assets/css/highlight.css">
    <link rel="stylesheet" href="../.././assets/css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="../.././assets/css/style.css">
  </head>
  <body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WKDV74"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WKDV74');</script>
    <!-- End Google Tag Manager -->

    <!-- Navigation -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="https://elmah.io/">
      <img src="../.././assets/img/logo.png" alt="elmah.io">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/features/">Features</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/pricing/">Pricing</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/tour/">Tour</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/about/">About</a></li>
        <li class="nav-item"><a class="nav-link" href="https://docs.elmah.io/">Docs</a></li>
        <li class="nav-item"><a class="nav-link" href="https://blog.elmah.io/">Blog</a></li>
      </ul>
      <ul class="navbar-nav navbar-nav-btn">
    	<li class="nav-item mr-md-2 mb-2 mb-md-0"><a class="btn btn-outline-light" href="https://app.elmah.io/signup/">Sign Up</a></li>
        <li class="nav-item"><a class="btn btn-outline-light" href="https://app.elmah.io/login/">Login</a></li>
      </ul>
    </div>
  </div>
</nav>

    <div class="container mb-5">
      <div class="row">
        <aside class="sidebar">
          <div class="sidebar-body">
            <div class="input-group mb-3">
              <div class="input-group-prepend"><span class="input-group-text"><i class="far fa-search"></i></span></div>
              <input type="text" id="search" class="form-control" placeholder="Search ..." />
            </div>
            <div id="searchList"></div>
            <hr>
            <ul class="main-nav">
              
              <li >
                <a class="li_parent" href="javascript:;">Getting Started</a>
                <ul>
                  
                  <li ><a href="..">Quick start</a></li>
                  
                  <li ><a href="../authentication/">Authentication</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown active">
                <a class="li_parent" href="javascript:;">ASP.NET / MVC / Web API</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-elmah/">Logging from WebForms</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aspnet-mvc/">Logging from ASP.NET MVC</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-web-api/">Logging from Web API</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-javascript/">Logging from JavaScript</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-a-running-website-on-azure/">Logging from a running website on Azure</a></li>
                  
                  <li class="active"><a href="./">Logging custom data</a></li>
                  
                  <li ><a href="../logging-errors-programmatically/">Logging errors programmatically</a></li>
                  
                  <li ><a href="../logging-to-multiple-elmah-logs/">Logging to multiple logs</a></li>
                  
                  <li ><a href="../remove-sensitive-form-data/">Remove sensitive form data</a></li>
                  
                  <li ><a href="../configure-elmah-io-manually/">Configure elmah.io manually</a></li>
                  
                  <li ><a href="../configure-elmah-io-from-code/">Configure elmah.io from code</a></li>
                  
                  <li ><a href="../logging-through-a-http-proxy/">Logging through a HTTP proxy</a></li>
                  
                  <li ><a href="../use-multiple-logs-for-different-environments/">Use multiple logs for different environments</a></li>
                  
                  <li ><a href="../specify-api-key-and-log-id-through-appsettings/">Specify API key and log ID through appSettings</a></li>
                  
                  <li ><a href="../elmah-and-custom-errors/">ELMAH and custom errors</a></li>
                  
                  <li ><a href="../logging-from-a-custom-http-module/">Logging from a custom HTTP module</a></li>
                  
                  <li ><a href="../upgrade-elmah-io-from-v2-to-v3/">Upgrade elmah.io from v2 to v3</a></li>
                  
                  <li ><a href="../asp-net-troubleshooting/">ASP.NET troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">ASP.NET Core</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-aspnet-core/">Logging from ASP.NET Core</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-javascript/">Logging from JavaScript</a></li>
                  
                  <li ><a href="../asp-net-core-troubleshooting/">ASP.NET Core troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Logging Frameworks</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-serilog/">Logging from Serilog</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-log4net/">Logging from log4net</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-nlog/">Logging from NLog</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-logary/">Logging from Logary</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-jsnlog/">Logging from JSNLog</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">CMS/Blogs</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-umbraco/">Logging from Umbraco</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-sitefinity/">Logging from Sitefinity</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-blogengine-net/">Logging from BlogEngine.NET</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-orchard/">Logging from Orchard</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Logging from something else</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-nancy/">Logging from Nancy</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-servicestack/">Logging from ServiceStack</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-wcf/">Logging from WCF</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-blazor/">Logging from Blazor</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-express/">Logging from Express</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-devexpress/">Logging from DevExpress (eXpressApp Framework)</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-azure-webjobs/">Logging from Azure WebJobs</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-azure-functions/">Logging from Azure Functions</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aws-lambdas/">Logging from AWS Lambdas</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-entity-framework-core/">Logging from Entity Framework Core</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-console-application/">Logging from Console</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-system-diagnostics/">Logging from System.Diagnostics</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-powershell/">Logging from PowerShell</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Apps and Integrations</a>
                <ul>
                  
                  <li ><a href="../elmah-io-apps-slack/">Slack</a></li>
                  
                  <li ><a href="../elmah-io-apps-hipchat/">HipChat</a></li>
                  
                  <li ><a href="../elmah-io-apps-github/">GitHub</a></li>
                  
                  <li ><a href="../elmah-io-apps-bitbucket/">Bitbucket</a></li>
                  
                  <li ><a href="../elmah-io-apps-jira/">Jira</a></li>
                  
                  <li ><a href="../elmah-io-apps-teams/">Microsoft Teams</a></li>
                  
                  <li ><a href="../elmah-io-apps-botbuster/">BotBuster</a></li>
                  
                  <li ><a href="../elmah-io-apps-ipfilter/">IP Filter</a></li>
                  
                  <li ><a href="../elmah-io-apps-mailman/">Mailman</a></li>
                  
                  <li ><a href="../elmah-io-apps-webclient/">WebClient</a></li>
                  
                  <li ><a href="../elmah-io-apps-youtrack/">YouTrack</a></li>
                  
                  <li ><a href="../elmah-io-apps-gitlab/">GitLab</a></li>
                  
                  <li ><a href="../elmah-io-apps-azure-boards/">Azure Boards</a></li>
                  
                  <li ><a href="../integrate-elmah-io-with-zapier/">Zapier</a></li>
                  
                  <li ><a href="../creating-apps-for-elmah-io/">Creating apps for elmah.io</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Uptime Monitoring</a>
                <ul>
                  
                  <li ><a href="../setup-uptime-monitoring/">Set up Uptime Monitoring</a></li>
                  
                  <li ><a href="../missing-server-side-information-on-uptime-errors/">Missing server side information on uptime errors</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Deployment Tracking</a>
                <ul>
                  
                  <li ><a href="../setup-deployment-tracking/">Set up Deployment Tracking</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Everything Else</a>
                <ul>
                  
                  <li ><a href="../managing-organisations-and-users/">Managing Organisations and Users</a></li>
                  
                  <li ><a href="../where-is-my-log-id/">Where is my log ID</a></li>
                  
                  <li ><a href="../where-is-my-api-key/">Where is my API key</a></li>
                  
                  <li ><a href="../how-to-configure-api-key-permissions/">How to configure API key permissions</a></li>
                  
                  <li ><a href="../creating-rules-to-perform-actions-on-messages/">Creating Rules to Perform Actions on Messages</a></li>
                  
                  <li ><a href="../query-messages-using-full-text-search/">Query messages using full-text search</a></li>
                  
                  <li ><a href="../tips-and-tricks-to-stay-below-your-message-limit/">Tips and tricks to stay below your message limit</a></li>
                  
                  <li ><a href="../use-extended-user-details-without-email-as-id/">Use Extended User Details without Email as Id</a></li>
                  
                  <li ><a href="../adding-version-information/">Adding version information</a></li>
                  
                  <li ><a href="../include-filename-and-line-number-in-stacktraces/">Include filename and line number in stack traces</a></li>
                  
                  <li ><a href="../how-prices-are-calculated/">How prices are calculated</a></li>
                  
                  <li ><a href="../export-data-from-elmah-io-to-json/">Export data from elmah.io to JSON</a></li>
                  
                  <li ><a href="../handle-elmah-io-downtime/">Handle elmah.io downtime</a></li>
                  
                  <li ><a href="../using-the-elmah-io-extension-for-visual-studio/">Using the elmah.io extension for Visual Studio</a></li>
                  
                  <li ><a href="../using-the-rest-api/">Using the REST API</a></li>
                  
                  <li ><a href="../elmah-and-elmah-io-differences/">ELMAH and elmah.io differences</a></li>
                  
                </ul>
              </li>
              
            </ul>
          </div>
        </aside>
        <a id="show-sidebar" href="javascript:;" class="btn btn-light btn-block d-block d-md-none"><span class="fal fa-bars"></span> <span>Documentation menu</span></a>
        <article class="col main-content">
          <div class="main-content-body">

            <h1 id="logging-custom-data">Logging custom data</h1>
<p>ELMAH stores a lot of contextual information when an error occurs. Things like cookies, stack trace, server variables and much more are stored to ease debugging the error at a later point in time. Most error log implementations for ELMAH doesn't support custom variables. Luckily, this is not the case for the elmah.io client.</p>
<p>Let’s look at some code. You have two options of decorating your errors with custom variables.</p>
<h3 id="use-the-data-dictionary-on-nets-exception-type">Use the <a href="https://msdn.microsoft.com/en-us/library/system.exception.data%28v=vs.110%29.aspx">Data</a> dictionary on .NET’s Exception type</h3>
<p>I talk to a lot of developers and not all of them know about the wonderful world of the Data dictionary. All exceptions in .NET contains a property named <code>Data</code> and of type <code>IDictionary</code>. The <code>Data</code> dictionary is intended for user-defined information about the exception. The elmah.io client iterates through key/values in this dictionary and ship it off to <a href="https://elmah.io/api">elmah.io’s API</a>. To log custom data using <code>Data</code>, just add a new key/value pair to the <code>Data</code> dictionary:</p>
<pre><code class="csharp">try
{
    CallSomeBusinessLogic(inputValue);
}
catch (Exception e)
{
    e.Data.Add(&quot;InputValueWas&quot;, inputValue);
    ErrorSignal.FromCurrentContext().Raise(e);
}
</code></pre>

<p>In the example I add a custom variable named <code>InputValueWas</code> with the value of the <code>inputValue</code> variable. This way I will be able to see which input value caused the exception.</p>
<h3 id="use-the-onmessage-hook-in-the-elmahio-client">Use the <code>OnMessage</code> hook in the elmah.io client</h3>
<p>You may not use ELMAH’s ErrorSignal feature, but rely on ELMAH to log uncaught exceptions only. In this scenario you probably don’t have access to the thrown exception. The elmah.io client offers a hook for you to be able to execute code every time something is logged:</p>
<pre><code class="csharp">Elmah.ErrorLog.GetDefault(null); // Forces creation of logger client
var logger = ErrorLog.Client;
logger.OnMessage += (sender, args) =&gt;
{
    if (args.Message.Data == null) args.Message.Data = new List&lt;Item&gt;();
    args.Message.Data.Add(new Item { Key = &quot;SomeOtherVariable&quot;, Value = someVariable });
};
</code></pre>

<p>You may not have seen the Logger type of elmah.io before, but what’s important to know right now is, that Logger is responsible for logging messages to the elmah.io API. Another new term here is Message. A message is the type encapsulating all of the information about the thrown exception.</p>
<p>In the code example I subscribe a new event handler to the <code>OnMessage</code> event. This tells the elmah.io client to execute your event handler, before actually logging an exception to elmah.io. I use the event to add a custom variable to the <code>Data</code> dictionary of the message logged to elmah.io.</p>
<h3 id="looking-at-your-custom-data">Looking at your custom data</h3>
<p>Logging custom data doesn’t really make anything easier, unless you have a place to show them. Luckily for you, we have thought about that and now offers a new tab on the error details:</p>
<p><img alt="Custom Variables" src="../images/looking_at_custom_variables.gif" /></p>
<p>Like the content in the other tabs of the error details, you will be able to filter results by the variable key.</p>
<h3 id="searching-custom-data">Searching custom data</h3>
<p>Custom data is not searchable by default. Sometimes it makes sense, that errors can be searched from values logged as part of custom data. For now, this feature is supported through the use of variable naming, but we may extend this to a configuration option through the UI as well.</p>
<p>To make a custom variable and its value searchable through the UI (as well as through the API), name the variable with the prefix <code>X-ELMAHIO-SEARCH-</code>. The variable will become searchable through the name added after the prefix.</p>
<p>Example:</p>
<pre><code class="csharp">Elmah.ErrorLog.GetDefault(null);
var logger = ErrorLog.Client;
logger.OnMessage += (sender, args) =&gt;{
    if (args.Message.Data == null) args.Message.Data = new List&lt;Item&gt;();
    args.Message.Data.Add(new Item { Key = &quot;X-ELMAHIO-SEARCH-myVariable&quot;, Value = &quot;Some funky value&quot; });
};
</code></pre>

<p>would make <code>myVariable</code> searchable using this query:</p>
<pre><code>data.myVariable:funky
</code></pre>

<p>Observe how the <code>X-ELMAHIO-SEARCH-</code> prefix is replaced with the <code>data.</code> prefix when indexed in elmah.io.</p>
<p>To avoid someone filling up our cluster with custom data, only the first three variables prefixed with <code>X-ELMAHIO-SEARCH-</code> are made searchable. Also, variables with a value containing more than 256 characters are not indexed.</p>

            <br/>
            <p><small><em>This article was brought to you by the elmah.io team. elmah.io is the best error management system for .NET web applications. We monitor your website, alert you when errors start happening and help you fix errors fast.</em></small></p>
            <p class="text-center">
                <a href="https://app.elmah.io/signup/" class="btn btn-lg btn-primary d-none d-sm-block" style="white-space: normal;">See how we can help you monitor your website for crashes</a>
                <a href="https://app.elmah.io/signup/" class="btn btn-lg btn-primary d-block d-sm-none">Monitor your website</a>
            </p>
          </div>
        </article>
      </div>
    </div>

    <footer>
    	<div id="back-to-top" class="d-block d-sm-none"><span class="far fa-arrow-up"></span></div>
    	<div class="pre-footer">
	    	<div class="container">
	    		<div class="company-logo">
					<img class="img-fluid" src="../.././assets/img/elmahio.png" alt="elmah.io">
				</div>
				<a href="https://app.elmah.io/signup/" class="btn btn-primary float-right"><span>Sign Up Now</span><span class="info">no credit card required - free 21-day trial</span></a>
			</div>
	    </div>
    	<div class="links">
    		<div class="container">
    			<div class="row">
    				<div class="col">
    					<h5>Product</h5>
    					<ul class="list-unstyled">
							<li><a href="https://elmah.io/features/">Features</a></li>
							<li><a href="https://elmah.io/pricing/">Pricing</a></li>
							<li><a href="https://elmah.io/api">API</a></li>
							<li><a href="https://headwayapp.co/elmah-io-changelog" rel="noopener noreferrer" target="_blank">Changelog</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Company</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/about/">About</a></li>
							<li><a href="https://elmah.io/contact/">Contact</a></li>
							<li><a href="https://blog.elmah.io/">Blog</a></li>
							<li><a href="https://docs.elmah.io/">Docs</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Learn</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/customer-stories/">Customer Stories</a></li>
							<li><a href="https://elmah.io/for-ctos/">For CEOs and CTOs</a></li>
							<li><a href="https://elmah.io/goodiebag/">Goodie Bag</a></li>
							<li><a href="https://elmah.io/tools/configvalidator/">Web.config Validator</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Guides</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/devops/">.NET DevOps</a></li>
							<li><a href="https://elmah.io/microservices/">.NET Microservices</a></li>
							<li><a href="https://elmah.io/cloud-logging/">.NET Cloud Logging</a></li>
							<li><a href="https://elmah.io/features/asp-net-core/">ASP.NET Core Error Logging</a></li>
						</ul>
    				</div>
                    <div class="col">
                        <h5>Social</h5>
                        <ul class="list-unstyled social">
                            <li class="list-inline-item"><a href="https://twitter.com/elmah_io"><i class="fab fa-twitter"></i></a></li>
                            <li class="list-inline-item"><a href="https://facebook.com/elmahdotio"><i class="fab fa-facebook-f"></i></a></li>
                            <li class="list-inline-item"><a href="https://www.linkedin.com/company/elmah-io"><i class="fab fa-linkedin-in"></i></a></li>
                        </ul>
                    </div>
    			</div>
    		</div>
    	</div>
    	<div class="copyright">
    		<div class="container">
    			<div class="text-center">
					<p>2013 - <script>document.write(new Date().getFullYear());</script> @ elmah.io. All Rights Reserved.</p>
					<p><a href="https://elmah.io/legal/terms-of-use/">Terms of Use</a> | <a href="https://elmah.io/legal/privacy-policy/">Privacy Policy</a> | <a href="https://elmah.io/legal/refund-policy/">Refund Policy</a></p>
				</div>
    		</div>
    	</div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/gh/elmahio/elmah.io.javascript@3.0.0/dist/elmahio.min.js?apiKey=a789ddece0bd47fe83390b702f5713a9&logId=24c89075-e32a-4a79-9f7e-e78381e0d761" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="../.././assets/js/bootstrap.min.js"></script>
    <script src="../.././assets/js/highlight.pack.js"></script>
    <script src="../.././assets/js/fuse.min.js"></script>
    <script src="../.././assets/js/jquery.fancybox.min.js"></script>
    <script src="../.././assets/js/main.js"></script>
  </body>
</html>