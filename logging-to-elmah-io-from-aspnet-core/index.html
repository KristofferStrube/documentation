<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <meta name="author" content="Thomas Ardal">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@elmah_io">
    <meta name="twitter:creator" content="@elmah_io">
    <meta name="twitter:title" content="Logging from ASP.NET Core | elmah.io">
    
    
    <meta property="og:title" content="Logging from ASP.NET Core | elmah.io">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.elmah.io/logging-to-elmah-io-from-aspnet-core/">
    
    <meta property="fb:app_id" content="218008838347208" />
    <title>Logging from ASP.NET Core | elmah.io</title>
    <link rel="canonical" href="https://docs.elmah.io/logging-to-elmah-io-from-aspnet-core/">
    <link rel="shortcut icon" href="../favicon.ico">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/fonts/font-awesome/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/highlight.css">
    <link rel="stylesheet" href="../assets/css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="../assets/css/style.css">
  </head>
  <body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WKDV74"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WKDV74');</script>
    <!-- End Google Tag Manager -->

    <!-- Navigation -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
  <div class="container">
    <a class="navbar-brand" href="https://elmah.io/">
      <img src="../assets/img/logo.png" alt="elmah.io">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/features/">Features</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/pricing/">Pricing</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/tour/">Tour</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/about/">About</a></li>
        <li class="nav-item"><a class="nav-link" href="https://docs.elmah.io/">Docs</a></li>
        <li class="nav-item"><a class="nav-link" href="https://blog.elmah.io/">Blog</a></li>
      </ul>
      <ul class="navbar-nav navbar-nav-btn justify-content-center">
        <li class="nav-item mr-md-2 mb-2 mb-md-0"><a class="btn btn-outline-light" href="https://app.elmah.io/login/">Login</a></li>
        <li class="nav-item"><a class="btn btn-signup-trial" href="https://app.elmah.io/signup/">Free Trial</a></li>
      </ul>
    </div>
  </div>
</nav>

    <div class="container mb-5">
      <div class="row">
        <aside class="sidebar">
          <div class="sidebar-body">
            <div class="input-group mb-3">
              <div class="input-group-prepend"><span class="input-group-text"><i class="far fa-search"></i></span></div>
              <input type="text" id="search" class="form-control" placeholder="Search ..." />
            </div>
            <div id="searchList"></div>
            <hr>
            <ul class="main-nav">
              
              <li >
                <a class="li_parent" href="javascript:;">Getting Started</a>
                <ul>
                  
                  <li ><a href="..">Quick start</a></li>
                  
                  <li ><a href="../authentication/">Authentication</a></li>
                  
                  <li ><a href="../integrations-high-level-overview/">Integrations high level overview</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">ASP.NET / MVC / Web API</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-elmah/">Logging from WebForms</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aspnet-mvc/">Logging from ASP.NET MVC</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-web-api/">Logging from Web API</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-javascript/">Logging from JavaScript</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-a-running-website-on-azure/">Logging from a running website on Azure</a></li>
                  
                  <li ><a href="../logging-custom-data/">Logging custom data</a></li>
                  
                  <li ><a href="../logging-errors-programmatically/">Logging errors programmatically</a></li>
                  
                  <li ><a href="../logging-to-multiple-elmah-logs/">Logging to multiple logs</a></li>
                  
                  <li ><a href="../remove-sensitive-form-data/">Remove sensitive form data</a></li>
                  
                  <li ><a href="../configure-elmah-io-manually/">Configure elmah.io manually</a></li>
                  
                  <li ><a href="../configure-elmah-io-from-code/">Configure elmah.io from code</a></li>
                  
                  <li ><a href="../logging-through-a-http-proxy/">Logging through a HTTP proxy</a></li>
                  
                  <li ><a href="../use-multiple-logs-for-different-environments/">Use multiple logs for different environments</a></li>
                  
                  <li ><a href="../specify-api-key-and-log-id-through-appsettings/">Specify API key and log ID through appSettings</a></li>
                  
                  <li ><a href="../elmah-and-custom-errors/">ELMAH and custom errors</a></li>
                  
                  <li ><a href="../logging-from-a-custom-http-module/">Logging from a custom HTTP module</a></li>
                  
                  <li ><a href="../upgrade-elmah-io-from-v2-to-v3/">Upgrade elmah.io from v2 to v3</a></li>
                  
                  <li ><a href="../asp-net-troubleshooting/">ASP.NET troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown active">
                <a class="li_parent" href="javascript:;">ASP.NET Core</a>
                <ul>
                  
                  <li class="active"><a href="./">Logging from ASP.NET Core</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-javascript/">Logging from JavaScript</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-blazor/">Logging from Blazor</a></li>
                  
                  <li ><a href="../asp-net-core-troubleshooting/">ASP.NET Core troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Logging Frameworks</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-serilog/">Logging from Serilog</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-log4net/">Logging from log4net</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-nlog/">Logging from NLog</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-logary/">Logging from Logary</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-jsnlog/">Logging from JSNLog</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">CMS/Blogs</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-umbraco/">Logging from Umbraco</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-sitefinity/">Logging from Sitefinity</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-blogengine-net/">Logging from BlogEngine.NET</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-orchard/">Logging from Orchard</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Logging from something else</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-nancy/">Logging from Nancy</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-servicestack/">Logging from ServiceStack</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-wcf/">Logging from WCF</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-express/">Logging from Express</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-devexpress/">Logging from DevExpress (eXpressApp Framework)</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-azure-webjobs/">Logging from Azure WebJobs</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-azure-functions/">Logging from Azure Functions</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aws-beanstalk/">Logging from AWS Beanstalk</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aws-lambdas/">Logging from AWS Lambdas</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-entity-framework-core/">Logging from Entity Framework Core</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-console-application/">Logging from Console</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-system-diagnostics/">Logging from System.Diagnostics</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-powershell/">Logging from PowerShell</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Apps and Integrations</a>
                <ul>
                  
                  <li ><a href="../elmah-io-apps-slack/">Slack</a></li>
                  
                  <li ><a href="../elmah-io-apps-hipchat/">HipChat</a></li>
                  
                  <li ><a href="../elmah-io-apps-github/">GitHub</a></li>
                  
                  <li ><a href="../elmah-io-apps-bitbucket/">Bitbucket</a></li>
                  
                  <li ><a href="../elmah-io-apps-jira/">Jira</a></li>
                  
                  <li ><a href="../elmah-io-apps-teams/">Microsoft Teams</a></li>
                  
                  <li ><a href="../elmah-io-apps-twilio/">Twilio</a></li>
                  
                  <li ><a href="../elmah-io-apps-botbuster/">BotBuster</a></li>
                  
                  <li ><a href="../elmah-io-apps-ipfilter/">IP Filter</a></li>
                  
                  <li ><a href="../elmah-io-apps-mailman/">Mailman</a></li>
                  
                  <li ><a href="../elmah-io-apps-webclient/">WebClient</a></li>
                  
                  <li ><a href="../elmah-io-apps-youtrack/">YouTrack</a></li>
                  
                  <li ><a href="../elmah-io-apps-gitlab/">GitLab</a></li>
                  
                  <li ><a href="../elmah-io-apps-azure-boards/">Azure Boards</a></li>
                  
                  <li ><a href="../elmah-io-apps-trello/">Trello</a></li>
                  
                  <li ><a href="../integrate-elmah-io-with-zapier/">Zapier</a></li>
                  
                  <li ><a href="../creating-apps-for-elmah-io/">Creating apps for elmah.io</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Uptime Monitoring</a>
                <ul>
                  
                  <li ><a href="../setup-uptime-monitoring/">Set up Uptime Monitoring</a></li>
                  
                  <li ><a href="../missing-server-side-information-on-uptime-errors/">Missing server side information on uptime errors</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Deployment Tracking</a>
                <ul>
                  
                  <li ><a href="../setup-deployment-tracking/">Set up Deployment Tracking</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Everything Else</a>
                <ul>
                  
                  <li ><a href="../managing-organisations-and-users/">Managing Organisations and Users</a></li>
                  
                  <li ><a href="../where-is-my-log-id/">Where is my log ID</a></li>
                  
                  <li ><a href="../where-is-my-api-key/">Where is my API key</a></li>
                  
                  <li ><a href="../where-is-my-invoice-receipt/">Where is my invoice / receipt</a></li>
                  
                  <li ><a href="../how-to-configure-api-key-permissions/">How to configure API key permissions</a></li>
                  
                  <li ><a href="../creating-rules-to-perform-actions-on-messages/">Creating Rules to Perform Actions on Messages</a></li>
                  
                  <li ><a href="../query-messages-using-full-text-search/">Query messages using full-text search</a></li>
                  
                  <li ><a href="../tips-and-tricks-to-stay-below-your-message-limit/">Tips and tricks to stay below your message limit</a></li>
                  
                  <li ><a href="../use-extended-user-details-without-email-as-id/">Use Extended User Details without Email as Id</a></li>
                  
                  <li ><a href="../adding-version-information/">Adding version information</a></li>
                  
                  <li ><a href="../include-filename-and-line-number-in-stacktraces/">Include filename and line number in stack traces</a></li>
                  
                  <li ><a href="../how-prices-are-calculated/">How prices are calculated</a></li>
                  
                  <li ><a href="../export-data-from-elmah-io-to-json/">Export data from elmah.io to JSON</a></li>
                  
                  <li ><a href="../handle-elmah-io-downtime/">Handle elmah.io downtime</a></li>
                  
                  <li ><a href="../using-the-elmah-io-extension-for-visual-studio/">Using the elmah.io extension for Visual Studio</a></li>
                  
                  <li ><a href="../using-the-rest-api/">Using the REST API</a></li>
                  
                  <li ><a href="../elmah-and-elmah-io-differences/">ELMAH and elmah.io differences</a></li>
                  
                </ul>
              </li>
              
            </ul>
          </div>
        </aside>
        <a id="show-sidebar" href="javascript:;" class="btn btn-light btn-block d-block d-md-none border"><span class="fal fa-bars"></span> <span>Documentation menu</span></a>
        <article class="col main-content">
          <div class="main-content-body">

            <p><a href="https://ci.appveyor.com/project/ThomasArdal/elmah-io-aspnetcore"><img alt="Build status" src="https://ci.appveyor.com/api/projects/status/j57ekc2k9eon3u9u?svg=true" /></a>
<a href="https://www.nuget.org/packages/Elmah.Io.AspNetCore"><img alt="NuGet" src="https://img.shields.io/nuget/v/Elmah.Io.AspNetCore.svg" /></a>
<a href="https://github.com/elmahio/Elmah.Io.AspNetCore/tree/master/samples"><img alt="Samples" src="https://img.shields.io/badge/samples-5-brightgreen.svg" /></a></p>
<h1 id="logging-to-elmahio-from-aspnet-core">Logging to elmah.io from ASP.NET Core</h1>
<div class="toc">
<ul>
<li><a href="#logging-to-elmahio-from-aspnet-core">Logging to elmah.io from ASP.NET Core</a><ul>
<li><a href="#configuring-api-key-and-log-id-in-options">Configuring API key and log ID in options</a></li>
<li><a href="#logging-exceptions-manually">Logging exceptions manually</a></li>
<li><a href="#additional-options">Additional options</a><ul>
<li><a href="#events">Events</a></li>
<li><a href="#remove-sensitive-form-data">Remove sensitive form data</a></li>
<li><a href="#formatting-exceptions">Formatting exceptions</a></li>
<li><a href="#logging-responses-not-throwing-an-exception">Logging responses not throwing an exception</a></li>
<li><a href="#logging-through-a-proxy">Logging through a proxy</a></li>
</ul>
</li>
<li><a href="#logging-health-check-results">Logging health check results</a></li>
</ul>
</li>
</ul>
</div>
<p>If you are looking to log all uncaught errors from ASP.NET Core, you've come to the right place. For help setting up general .NET Core logging similar to log4net, check out <a href="https://docs.elmah.io/logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a>.</p>
<p>To log all warnings and errors from ASP.NET Core, install the following NuGet package:</p>
<pre><code class="powershell">Install-Package Elmah.Io.AspNetCore
</code></pre>

<p>Call <code>AddElmahIo</code> in the <code>ConfigureServices</code>-method in the <code>Startup.cs</code> file:</p>
<pre><code class="csharp">public void ConfigureServices(IServiceCollection services)
{
    services.AddElmahIo(o =&gt;
    {
        o.ApiKey = &quot;API_KEY&quot;;
        o.LogId = new Guid(&quot;LOG_ID&quot;);
    });
    ...
}
</code></pre>

<p>Replace <code>API_KEY</code> with your API key (<a href="https://docs.elmah.io/where-is-my-api-key/">Where is my API key?</a>) and <code>LOG_ID</code> (<a href="https://docs.elmah.io/where-is-my-log-id/">Where is my log ID?</a>) with the log Id of the log you want to log to.</p>
<p>Call <code>UseElmahIo</code> in the <code>Configure</code>-method in the <code>Startup.cs</code> file:</p>
<pre><code class="csharp">public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory fac)
{
    ...
    app.UseElmahIo();
    ...
}
</code></pre>

<blockquote>
<p>Make sure to call the <code>UseElmahIo</code>-method <strong>after</strong> installation of other pieces of middleware handling exceptions (like <code>UseDeveloperExceptionPage</code> and <code>UseExceptionHandler</code>), but <strong>before</strong> any calls to <code>UseStaticFiles</code>, <code>UseMvc</code> and similar.</p>
</blockquote>
<p>That's it. Every uncaught exception will be logged to elmah.io.</p>
<h2 id="configuring-api-key-and-log-id-in-options">Configuring API key and log ID in options</h2>
<p>If you have different environments (everyone have a least localhost and production), you should consider adding the API key and log ID in your <code>appsettings.json</code> file:</p>
<pre><code class="json">{
  ...
  &quot;ElmahIo&quot;: {
    &quot;ApiKey&quot;: &quot;API_KEY&quot;,
    &quot;LogId&quot;: &quot;LOG_ID&quot;
  }
}
</code></pre>

<p>Configuring elmah.io is done by calling the <code>Configure</code> method instead of <code>AddElmahIo</code>:</p>
<pre><code class="csharp">public void ConfigureServices(IServiceCollection services)
{
    services.Configure&lt;ElmahIoOptions&gt;(Configuration.GetSection(&quot;ElmahIo&quot;));
    services.AddElmahIo();
}
</code></pre>

<p>Notice that you still need to call <code>AddElmahIo</code> in order to correctly register middleware dependencies.</p>
<p>Finally, call the <code>UseElmahIo</code>-method (as you would do with config in C# too):</p>
<pre><code class="csharp">public void Configure(IApplicationBuilder app, IHostingEnvironment env)
{
    ...
    app.UseElmahIo();
    ...
}
</code></pre>

<p>You can still configure additional options on the <code>ElmahIoOptions</code> object:</p>
<pre><code class="csharp">public void ConfigureServices(IServiceCollection services)
{
    services.Configure&lt;ElmahIoOptions&gt;(Configuration.GetSection(&quot;ElmahIo&quot;));
    services.Configure&lt;ElmahIoOptions&gt;(o =&gt;
    {
        o.OnMessage = msg =&gt;
        {
            msg.Version = &quot;1.0.0&quot;;
        };
    });
    services.AddElmahIo();
}
</code></pre>

<h2 id="logging-exceptions-manually">Logging exceptions manually</h2>
<p>While automatically logging all uncaught exceptions is definitely a nice feature, sometimes you may want to catch exceptions and log them manually. If you just want to log the exception details, without all of the contextual information about the HTTP context (cookies, server variables, etc.), we recommend you to look at our integration for <a href="https://docs.elmah.io/logging-to-elmah-io-from-microsoft-extensions-logging/">Microsoft.Extensions.Logging</a>. If the context is important for the error, you can utilize the <code>Ship</code>-methods available in <code>Elmah.Io.AspNetCore</code>:</p>
<pre><code class="csharp">try
{
    var i = 0;
    var result = 42/i;
}
catch (DivideByZeroException e)
{
    e.Ship(HttpContext);
}
</code></pre>

<p>When catching an exception, you simply call the <code>Ship</code> extension method with the current HTTP context as parameter.</p>
<h2 id="additional-options">Additional options</h2>
<h3 id="events">Events</h3>
<p>elmah.io for ASP.NET Core supports a range of events for hooking into the process of logging messages. Events are registered as actions when installing the elmah.io middleware:</p>
<pre><code class="csharp">services.AddElmahIo(o =&gt;
{
    o.ApiKey = &quot;API_KEY&quot;;
    o.LogId = new Guid(&quot;LOG_ID&quot;);
    o.OnMessage = message =&gt;
    {
        message.Version = &quot;42&quot;;
    };
    o.OnError = (message, exception) =&gt;
    {
        logger.LogError(1, exception, &quot;Error during log to elmah.io&quot;);
    };
});
</code></pre>

<p>The actions provide a mechanism for hooking into the log process. The action registered in the <code>OnMessage</code> property is called by elmah.io just before logging a new message to the API. Use this action to decorate/enrich your log messages with additional data, like a version number. The <code>OnError</code> action is called if communication with the elmah.io API failed. If this happens, you should log the message to a local log (through Microsoft.Extensions.Logging, Serilog or similar). </p>
<blockquote>
<p>Do not log to elmah.io in your <code>OnError</code> action, since that could cause an infinite loop in your code.</p>
</blockquote>
<p>While elmah.io supports <a href="https://docs.elmah.io/creating-rules-to-perform-actions-on-messages/#ignore-errors-with-a-http-status-code-of-400">ignore rules</a> serverside, you may want to filter out errors without even hitting the elmah.io API. Using the <code>OnFilter</code> function on the options object, filtering is easy:</p>
<pre><code class="csharp">services.AddElmahIo(o =&gt;
{
    ...
    o.OnFilter = message =&gt;
    {
        return message.Type == &quot;System.NullReferenceException&quot;;
    };
});
</code></pre>

<p>The example above, ignores all messages of type <code>System.NullReferenceException</code>.</p>
<h3 id="remove-sensitive-form-data">Remove sensitive form data</h3>
<p>The <code>OnMessage</code> event can be used to filter sensitive form data as well. In the following example, we remove the server variable named <code>Secret-Key</code> from all messages, before sending them to elmah.io.</p>
<pre><code class="csharp">services.AddElmahIo(options =&gt;
{
    options.ApiKey = &quot;API_KEY&quot;;
    options.LogId = new Guid(&quot;LOG_ID&quot;);

    options.OnMessage = msg =&gt;
    {
        var item = msg.ServerVariables.FirstOrDefault(x =&gt; x.Key == &quot;Secret-Key&quot;); 
        if (item != null)
        {
            msg.ServerVariables.Remove(item);
        }
    };
});
</code></pre>

<h3 id="formatting-exceptions">Formatting exceptions</h3>
<p>A default exception formatter is used to format any exceptions, before sending them off to the elmah.io API. To override the format of the details field in elmah.io, set a new <code>IExceptionFormatter</code> in the <code>ExceptionFormatter</code> property on the <code>ElmahIoOptions</code> object:</p>
<pre><code class="csharp">services.AddElmahIo(o =&gt;
{
    ...
    o.ExceptionFormatter = new DefaultExceptionFormatter();
}
</code></pre>

<p>Besides the default exception formatted (<code>DefaultExceptionFormatter</code>), Elmah.Io.AspNetCore comes with a formatter called <code>YellowScreenOfDeathExceptionFormatter</code>. This formatter, outputs an exception and its inner exceptions as a list of exceptions, much like on the ASP.NET yellow screen of death. If you want, implementing your own exception formatter, requires you to implement a single method.</p>
<h3 id="logging-responses-not-throwing-an-exception">Logging responses not throwing an exception</h3>
<p>As default, uncaught exceptions (500's) and 404's are logged automatically. Let's say you have a controller returning a Bad Request and want to log that as well. Since returning a 400 from a controller doesn't trigger an exception, you will need to configure this status code:</p>
<pre><code class="csharp">services.AddElmahIo(o =&gt;
{
    ...
    o.HandledStatusCodesToLog = new List&lt;int&gt; { 400 };
}
</code></pre>

<h3 id="logging-through-a-proxy">Logging through a proxy</h3>
<p>Since ASP.NET Core no longer support proxy configuration through <code>web.config</code>, you can log to elmah.io by configuring a proxy manually:</p>
<pre><code class="csharp">services.AddElmahIo(o =&gt;
{
    ...
    o.WebProxy = new System.Net.WebProxy(&quot;localhost&quot;, 8888);
}
</code></pre>

<p>In this example, the elmah.io client routes all traffic through <code>http://localhost:8000</code>.</p>
<h2 id="logging-health-check-results">Logging health check results</h2>
<p>ASP.NET Core 2.2 introduced a new feature named Health Checks. Health checks enable much more sofisticated uptime checks, by allowing you to verify not only uptime on your own website, but also on any dependency or precondition necessary for your website to work. For a general introduction to health checks, I recommend you to read <a href="https://blog.elmah.io/asp-net-core-2-2-health-checks-explained/">ASP.NET Core 2.2 Health Checks Explained</a>.</p>
<p>Health checks have error reporting built-in. We provide a publisher in order to allow ASP.NET Core to ship health check errors directly to your log on elmah.io. Start by installing the <code>Elmah.Io.AspNetCore.HealthChecks</code> NuGet package:</p>
<pre><code class="ps">Install-Package Elmah.Io.AspNetCore.HealthChecks -IncludePrerelease
</code></pre>

<p>Then configure the elmah.io publisher as part of initializing health checks:</p>
<pre><code class="csharp">public void ConfigureServices(IServiceCollection services)
{
    ...
    services
        .AddHealthChecks()
        .AddElmahIoPublisher(&quot;API_KEY&quot;, new Guid(&quot;LOG_ID&quot;));
    ...
}
</code></pre>

<blockquote>
<p>If using <code>Elmah.Io.AspNetCore.HealthChecks</code> together with <em>Health Checks UI</em> make sure to call <code>AddHealthChecksUI</code> <strong>after</strong> calling <code>AddElmahIoPublisher</code>.</p>
</blockquote>

            <br/>
            <p><small><em>This article was brought to you by the elmah.io team. elmah.io is the best error management system for .NET web applications. We monitor your website, alert you when errors start happening and help you fix errors fast.</em></small></p>
            <p class="text-center">
                <a href="https://app.elmah.io/signup/" class="btn btn-lg btn-primary d-none d-sm-block" style="white-space: normal;">See how we can help you monitor your website for crashes</a>
                <a href="https://app.elmah.io/signup/" class="btn btn-lg btn-primary d-block d-sm-none">Monitor your website</a>
            </p>
          </div>
        </article>
      </div>
    </div>

    <footer>
    	<div id="back-to-top" class="d-block d-sm-none"><span class="far fa-arrow-up"></span></div>
    	<div class="pre-footer">
	    	<div class="container">
	    		<div class="company-logo">
					<img class="img-fluid" src="../assets/img/elmahio.png" alt="elmah.io">
				</div>
				<a href="https://app.elmah.io/signup/" class="btn btn-primary float-right"><span>Sign Up Now</span><span class="info">no credit card required</span></a>
			</div>
	    </div>
    	<div class="links">
    		<div class="container">
    			<div class="row">
    				<div class="col">
    					<h5>Product</h5>
    					<ul class="list-unstyled">
							<li><a href="https://elmah.io/features/">Features</a></li>
							<li><a href="https://elmah.io/pricing/">Pricing</a></li>
						        <li><a href="https://elmah.io/tour/">Tour</a></li>
							<li><a href="https://elmah.io/features/appstore/">App Store</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Company</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/about/">About</a></li>
							<li><a href="https://elmah.io/contact/">Contact</a></li>
							<li><a href="https://blog.elmah.io/">Blog</a></li>
							<li><a href="https://docs.elmah.io/">Docs</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Learn</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/customer-stories/">Customer Stories</a></li>
							<li><a href="https://elmah.io/for-ctos/">For CEOs and CTOs</a></li>
							<li><a href="https://elmah.io/goodiebag/">Goodie Bag</a></li>
                                                        <li><a href="https://elmah.io/api/">API</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Guides</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/devops/">.NET DevOps</a></li>
							<li><a href="https://elmah.io/microservices/">.NET Microservices</a></li>
							<li><a href="https://elmah.io/cloud-logging/">.NET Cloud Logging</a></li>
							<li><a href="https://elmah.io/features/asp-net-core/">ASP.NET Core Error Logging</a></li>
						</ul>
    				</div>
    				<div class="col">
                        <h5>Online Tools</h5>
                        <ul class="list-unstyled">
                            <li><a href="https://elmah.io/tools/configvalidator/">Web.config Validator</a></li>
                            <li><a href="https://elmah.io/tools/stack-trace-formatter/">Stack Trace Formatter</a></li>
                            <li><a href="https://elmah.io/tools/webconfig-transformation-tester/">Web.config Transform Tester</a></li>
                        </ul>
                    </div>
    			</div>
    		</div>
    	</div>
    	<div class="copyright">
    		<div class="container">
    			<div class="row no-gutters">
                    <div class="col-lg-5 col-md-12 order-2 order-lg-1">
                        <div class="text-center text-lg-left">
        					<p>2013 - <script>document.write(new Date().getFullYear());</script> @ elmah.io. All Rights Reserved.</p>
        					<p><a href="https://elmah.io/legal/terms-of-use/">Terms of Use</a> | <a href="https://elmah.io/legal/privacy-policy/">Privacy Policy</a> | <a href="https://elmah.io/legal/refund-policy/">Refund Policy</a></p>
        				</div>
                    </div>
                    <div class="col-lg-2 col-md-12 order-3 order-lg-1">
                        <ul class="list-unstyled social mb-0">
                            <li class="list-inline-item"><a href="https://twitter.com/elmah_io"><i class="fab fa-twitter"></i></a></li>
                            <li class="list-inline-item"><a href="https://facebook.com/elmahdotio"><i class="fab fa-facebook-f"></i></a></li>
                            <li class="list-inline-item"><a href="https://www.linkedin.com/company/elmah-io/"><i class="fab fa-linkedin-in"></i></a></li>
                        </ul>
                    </div>
                    <div class="col-lg-5 col-md-12 order-1 order-lg-2">
                        <div class="footer-badges text-center text-lg-right">
                            <a href="https://elmah.io/security/"><img src="../assets/img/pcicompliant.png" draggable="false" alt="PCI Compliant" /></a>
                            <a href="https://elmah.io/security/"><img src="../assets/img/gdpr.png" draggable="false" alt="GDPR Compliant" /></a>
                            <a href="https://elmah.io/security/"><img src="../assets/img/shieldssl.png" draggable="false" alt="Alpha SSL" /></a>
                        </div>
                    </div>
                </div>
    		</div>
    	</div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/gh/elmahio/elmah.io.javascript@3.0.0/dist/elmahio.min.js?apiKey=a789ddece0bd47fe83390b702f5713a9&logId=24c89075-e32a-4a79-9f7e-e78381e0d761" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="../assets/js/bootstrap.min.js"></script>
    <script src="../assets/js/highlight.pack.js"></script>
    <script src="../assets/js/fuse.min.js"></script>
    <script src="../assets/js/jquery.fancybox.min.js"></script>
    <script src="../assets/js/clipboard.min.js"></script>
    <script src="../assets/js/main.js"></script>
  </body>
</html>