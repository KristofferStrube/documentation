<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <meta name="author" content="Thomas Ardal">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@elmah_io">
    <meta name="twitter:creator" content="@elmah_io">
    <meta name="twitter:title" content="Logging from log4net | elmah.io">
    
    
    <meta property="og:title" content="Logging from log4net | elmah.io">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.elmah.io/logging-to-elmah-io-from-log4net/">
    
    <meta property="fb:app_id" content="218008838347208" />
    <title>Logging from log4net | elmah.io</title>
    <link rel="canonical" href="https://docs.elmah.io/logging-to-elmah-io-from-log4net/">
    <link rel="shortcut icon" href="../favicon.ico">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/fonts/font-awesome/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/highlight.css">
    <link rel="stylesheet" href="../assets/css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="../assets/css/style.css">
  </head>
  <body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WKDV74"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WKDV74');</script>
    <!-- End Google Tag Manager -->

    <!-- Navigation -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
  <div class="container">
    <a class="navbar-brand" href="https://elmah.io/">
      <img src="../assets/img/logo.png" alt="elmah.io">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/features/">Features</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/pricing/">Pricing</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/tour/">Tour</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/about/">About</a></li>
        <li class="nav-item"><a class="nav-link" href="https://docs.elmah.io/">Docs</a></li>
        <li class="nav-item"><a class="nav-link" href="https://blog.elmah.io/">Blog</a></li>
      </ul>
      <ul class="navbar-nav navbar-nav-btn justify-content-center">
        <li class="nav-item mr-md-2 mb-2 mb-md-0"><a class="btn btn-outline-light" href="https://app.elmah.io/login/">Login</a></li>
        <li class="nav-item"><a class="btn btn-signup-trial" href="https://app.elmah.io/signup/">Free Trial</a></li>
      </ul>
    </div>
  </div>
</nav>

    <div class="container mb-5">
      <div class="row">
        <aside class="sidebar">
          <div class="sidebar-body">
            <div class="input-group mb-3">
              <div class="input-group-prepend"><span class="input-group-text"><i class="far fa-search"></i></span></div>
              <input type="text" id="search" class="form-control" placeholder="Search ..." />
            </div>
            <div id="searchList"></div>
            <hr>
            <ul class="main-nav">
              
              <li >
                <a class="li_parent" href="javascript:;">Getting Started</a>
                <ul>
                  
                  <li ><a href="..">Quick start</a></li>
                  
                  <li ><a href="../authentication/">Authentication</a></li>
                  
                  <li ><a href="../integrations-high-level-overview/">Integrations high level overview</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">ASP.NET / MVC / Web API</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-elmah/">Logging from WebForms</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aspnet-mvc/">Logging from ASP.NET MVC</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-web-api/">Logging from Web API</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-javascript/">Logging from JavaScript</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-a-running-website-on-azure/">Logging from a running website on Azure</a></li>
                  
                  <li ><a href="../logging-custom-data/">Logging custom data</a></li>
                  
                  <li ><a href="../logging-errors-programmatically/">Logging errors programmatically</a></li>
                  
                  <li ><a href="../logging-to-multiple-elmah-logs/">Logging to multiple logs</a></li>
                  
                  <li ><a href="../remove-sensitive-form-data/">Remove sensitive form data</a></li>
                  
                  <li ><a href="../configure-elmah-io-manually/">Configure elmah.io manually</a></li>
                  
                  <li ><a href="../configure-elmah-io-from-code/">Configure elmah.io from code</a></li>
                  
                  <li ><a href="../logging-through-a-http-proxy/">Logging through a HTTP proxy</a></li>
                  
                  <li ><a href="../use-multiple-logs-for-different-environments/">Use multiple logs for different environments</a></li>
                  
                  <li ><a href="../specify-api-key-and-log-id-through-appsettings/">Specify API key and log ID through appSettings</a></li>
                  
                  <li ><a href="../elmah-and-custom-errors/">ELMAH and custom errors</a></li>
                  
                  <li ><a href="../logging-from-a-custom-http-module/">Logging from a custom HTTP module</a></li>
                  
                  <li ><a href="../upgrade-elmah-io-from-v2-to-v3/">Upgrade elmah.io from v2 to v3</a></li>
                  
                  <li ><a href="../asp-net-troubleshooting/">ASP.NET troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">ASP.NET Core</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-aspnet-core/">Logging from ASP.NET Core</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-javascript/">Logging from JavaScript</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-blazor/">Logging from Blazor</a></li>
                  
                  <li ><a href="../using-different-logs-per-environment-in-aspnet-core/">Using different logs per environment in ASP.NET Core</a></li>
                  
                  <li ><a href="../roslyn-analyzers-for-elmah-io-and-aspnet-core/">Roslyn analyzers for elmah.io and ASP.NET Core</a></li>
                  
                  <li ><a href="../asp-net-core-troubleshooting/">ASP.NET Core troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown active">
                <a class="li_parent" href="javascript:;">Logging Frameworks</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-serilog/">Logging from Serilog</a></li>
                  
                  <li class="active"><a href="./">Logging from log4net</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-nlog/">Logging from NLog</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-logary/">Logging from Logary</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-jsnlog/">Logging from JSNLog</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">CMS/Blogs</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-umbraco/">Logging from Umbraco</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-sitefinity/">Logging from Sitefinity</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-blogengine-net/">Logging from BlogEngine.NET</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-orchard/">Logging from Orchard</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Logging from something else</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-nancy/">Logging from Nancy</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-servicestack/">Logging from ServiceStack</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-wcf/">Logging from WCF</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-express/">Logging from Express</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-devexpress/">Logging from DevExpress (eXpressApp Framework)</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-azure-webjobs/">Logging from Azure WebJobs</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-azure-functions/">Logging from Azure Functions</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aws-beanstalk/">Logging from AWS Beanstalk</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aws-lambdas/">Logging from AWS Lambdas</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-entity-framework-core/">Logging from Entity Framework Core</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-console-application/">Logging from Console</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-system-diagnostics/">Logging from System.Diagnostics</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-powershell/">Logging from PowerShell</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Apps and Integrations</a>
                <ul>
                  
                  <li ><a href="../elmah-io-apps-slack/">Slack</a></li>
                  
                  <li ><a href="../elmah-io-apps-hipchat/">HipChat</a></li>
                  
                  <li ><a href="../elmah-io-apps-github/">GitHub</a></li>
                  
                  <li ><a href="../elmah-io-apps-bitbucket/">Bitbucket</a></li>
                  
                  <li ><a href="../elmah-io-apps-jira/">Jira</a></li>
                  
                  <li ><a href="../elmah-io-apps-teams/">Microsoft Teams</a></li>
                  
                  <li ><a href="../elmah-io-apps-twilio/">Twilio</a></li>
                  
                  <li ><a href="../elmah-io-apps-botbuster/">BotBuster</a></li>
                  
                  <li ><a href="../elmah-io-apps-ipfilter/">IP Filter</a></li>
                  
                  <li ><a href="../elmah-io-apps-mailman/">Mailman</a></li>
                  
                  <li ><a href="../elmah-io-apps-webclient/">WebClient</a></li>
                  
                  <li ><a href="../elmah-io-apps-youtrack/">YouTrack</a></li>
                  
                  <li ><a href="../elmah-io-apps-gitlab/">GitLab</a></li>
                  
                  <li ><a href="../elmah-io-apps-azure-boards/">Azure Boards</a></li>
                  
                  <li ><a href="../elmah-io-apps-trello/">Trello</a></li>
                  
                  <li ><a href="../integrate-elmah-io-with-zapier/">Zapier</a></li>
                  
                  <li ><a href="../creating-apps-for-elmah-io/">Creating apps for elmah.io</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Uptime Monitoring</a>
                <ul>
                  
                  <li ><a href="../setup-uptime-monitoring/">Set up Uptime Monitoring</a></li>
                  
                  <li ><a href="../missing-server-side-information-on-uptime-errors/">Missing server side information on uptime errors</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Heartbeats</a>
                <ul>
                  
                  <li ><a href="../setup-heartbeats/">Set up Heartbeats</a></li>
                  
                  <li ><a href="../logging-heartbeats-from-asp-net-core/">Logging heartbeats from ASP.NET Core</a></li>
                  
                  <li ><a href="../logging-heartbeats-from-azure-functions/">Logging heartbeats from Azure Functions</a></li>
                  
                  <li ><a href="../logging-heartbeats-from-powershell/">Logging heartbeats from PowerShell</a></li>
                  
                  <li ><a href="../logging-heartbeats-from-curl/">Logging heartbeats from cURL</a></li>
                  
                  <li ><a href="../logging-heartbeats-from-umbraco/">Logging heartbeats from Umbraco</a></li>
                  
                  <li ><a href="../logging-heartbeats-from-hangfire/">Logging heartbeats from Hangfire</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Deployment Tracking</a>
                <ul>
                  
                  <li ><a href="../setup-deployment-tracking/">Set up Deployment Tracking</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Everything Else</a>
                <ul>
                  
                  <li ><a href="../managing-organisations-and-users/">Managing Organisations and Users</a></li>
                  
                  <li ><a href="../where-is-my-log-id/">Where is my log ID</a></li>
                  
                  <li ><a href="../where-is-my-api-key/">Where is my API key</a></li>
                  
                  <li ><a href="../where-is-my-invoice-receipt/">Where is my invoice / receipt</a></li>
                  
                  <li ><a href="../how-to-configure-api-key-permissions/">How to configure API key permissions</a></li>
                  
                  <li ><a href="../how-to-enable-two-factor-login/">How to enable two-factor login</a></li>
                  
                  <li ><a href="../creating-rules-to-perform-actions-on-messages/">Creating Rules to Perform Actions on Messages</a></li>
                  
                  <li ><a href="../query-messages-using-full-text-search/">Query messages using full-text search</a></li>
                  
                  <li ><a href="../tips-and-tricks-to-stay-below-your-message-limit/">Tips and tricks to stay below your message limit</a></li>
                  
                  <li ><a href="../use-extended-user-details-without-email-as-id/">Use Extended User Details without Email as Id</a></li>
                  
                  <li ><a href="../adding-version-information/">Adding version information</a></li>
                  
                  <li ><a href="../include-filename-and-line-number-in-stacktraces/">Include filename and line number in stack traces</a></li>
                  
                  <li ><a href="../how-prices-are-calculated/">How prices are calculated</a></li>
                  
                  <li ><a href="../export-data-from-elmah-io-to-json/">Export data from elmah.io to JSON</a></li>
                  
                  <li ><a href="../handle-elmah-io-downtime/">Handle elmah.io downtime</a></li>
                  
                  <li ><a href="../using-the-elmah-io-extension-for-visual-studio/">Using the elmah.io extension for Visual Studio</a></li>
                  
                  <li ><a href="../using-the-rest-api/">Using the REST API</a></li>
                  
                  <li ><a href="../email-troubleshooting/">Email troubleshooting</a></li>
                  
                  <li ><a href="../elmah-and-elmah-io-differences/">ELMAH and elmah.io differences</a></li>
                  
                </ul>
              </li>
              
            </ul>
          </div>
        </aside>
        <a id="show-sidebar" href="javascript:;" class="btn btn-light btn-block d-block d-md-none border"><span class="fal fa-bars"></span> <span>Documentation menu</span></a>
        <article class="col main-content">
          <div class="main-content-body">

            <p><a href="https://ci.appveyor.com/project/ThomasArdal/elmah-io-log4net"><img alt="Build status" src="https://ci.appveyor.com/api/projects/status/xdujoaelpbyg8lov?svg=true" /></a>
<a href="https://www.nuget.org/packages/elmah.io.log4net"><img alt="NuGet" src="https://img.shields.io/nuget/v/elmah.io.log4net.svg" /></a>
<a href="https://github.com/elmahio/elmah.io.log4net/tree/master/samples"><img alt="Samples" src="https://img.shields.io/badge/samples-2-brightgreen.svg" /></a></p>
<h1 id="logging-to-elmahio-from-log4net">Logging to elmah.io from Log4net</h1>
<div class="toc">
<ul>
<li><a href="#logging-to-elmahio-from-log4net">Logging to elmah.io from Log4net</a><ul>
<li><a href="#logging-custom-properties">Logging custom properties</a></li>
<li><a href="#message-hooks">Message hooks</a><ul>
<li><a href="#decorating-log-messages">Decorating log messages</a></li>
</ul>
</li>
<li><a href="#specify-api-key-and-log-id-in-appsettings">Specify API key and log ID in appSettings</a></li>
<li><a href="#aspnet-core">ASP.NET Core</a></li>
</ul>
</li>
</ul>
</div>
<p>In this tutorial we'll add logging to elmah.io from a .NET application with log4net. Install the elmah.io appender:</p>
<pre><code class="powershell">Install-Package elmah.io.log4net
</code></pre>

<p>Add the following to your AssemblyInfo.cs file:</p>
<pre><code class="csharp">[assembly: log4net.Config.XmlConfigurator(Watch = true)]
</code></pre>

<p>Add the following config section to your <code>web/app.config</code> file:</p>
<pre><code class="xml">&lt;section name=&quot;log4net&quot; type=&quot;log4net.Config.Log4NetConfigurationSectionHandler, log4net&quot; /&gt;
</code></pre>

<p>Finally, add the log4net configuration element to <code>web/app.config</code>:</p>
<pre><code class="xml">&lt;log4net&gt;
  &lt;appender name=&quot;ElmahIoAppender&quot; type=&quot;elmah.io.log4net.ElmahIoAppender, elmah.io.log4net&quot;&gt;
    &lt;logId value=&quot;LOG_ID&quot; /&gt;
    &lt;apiKey value=&quot;API_KEY&quot; /&gt;
  &lt;/appender&gt;
  &lt;root&gt;
    &lt;level value=&quot;Info&quot; /&gt;
    &lt;appender-ref ref=&quot;ElmahIoAppender&quot; /&gt;
  &lt;/root&gt;
&lt;/log4net&gt;
</code></pre>

<p>That’s it! log4net is now configured and log messages to elmah.io. Remember to replace <code>API_KEY</code>(<a href="https://docs.elmah.io/where-is-my-api-key/">Where is my API key?</a>) and <code>LOG_ID</code> (<a href="https://docs.elmah.io/where-is-my-log-id/">Where is my log ID?</a>) with your actual log Id. To start logging, write your usual log4net log statements:</p>
<pre><code class="csharp">var log = log4net.LogManager.GetLogger(typeof(HomeController));
try
{
    log.Info(&quot;Trying something&quot;);
    throw new ApplicationException();
}
catch (ApplicationException ex)
{
    log.Error(&quot;Error happening&quot;, ex);
}
</code></pre>

<h2 id="logging-custom-properties">Logging custom properties</h2>
<p>log4net offers a feature called context properties. With context properties, you can log additional key/value pairs with every log message. The elmah.io appender for log4net, supports context properties as well. Context properties are handled like <a href="https://docs.elmah.io/logging-custom-data/">custom properties</a> in the elmah.io UI.</p>
<p>Let's utilize two different hooks in log4net, to add context properties to elmah.io:</p>
<pre><code class="csharp">log4net.GlobalContext.Properties[&quot;ApplicationIdentifier&quot;] = &quot;MyCoolApp&quot;;
log4net.ThreadContext.Properties[&quot;ThreadId&quot;] = Thread.CurrentThread.ManagedThreadId;

log.Info(&quot;This is a message with custom properties&quot;);
</code></pre>

<p>Basically, we set two custom properties on contextual classes provided by log4net. To read more about the choices in log4net, check out the <a href="https://logging.apache.org/log4net/release/manual/contexts.html">log4net manual</a>.</p>
<p>When looking up the log message in elmah.io, we see the context properties in the Data tab. Besides the two custom variables that we set through <code>GlobalContext</code> and <code>ThreadContext</code>, we see a couple of build-in properties in log4net, both prefixed with <code>log4net:</code>.</p>
<p>In addition, <code>Elmah.Io.Log4Net</code> provides a range of reserved property names, that can be used to fill in data in the correct fields on the elmah.io UI. Let's say you want to fill the User field:</p>
<pre><code class="csharp">var properties = new PropertiesDictionary();
properties[&quot;User&quot;] = &quot;Arnold Schwarzenegger&quot;;
log.Logger.Log(new LoggingEvent(new LoggingEventData
{
    Level = Level.Error,
    TimeStampUtc = DateTime.UtcNow,
    Properties = properties,
    Message = &quot;Hasta la vista, baby&quot;,
}));
</code></pre>

<p>This will fill in the value <code>Arnold Schwarzenegger</code> in the <code>User</code> field, as well as add a key/value pair to the Data tab on elmah.io. For a reference of all possible property names, check out the property names on <a href="https://github.com/elmahio/Elmah.Io.Client/blob/master/src/Elmah.Io.Client/Models/CreateMessage.cs">CreateMessage</a>.</p>
<h2 id="message-hooks">Message hooks</h2>
<h3 id="decorating-log-messages">Decorating log messages</h3>
<p>In case you want to set one or more core properties on each elmah.io message logged, using message hooks may be a better solution. In that case you will need to add a bit of log4net magic. An example could be setting the <code>Version</code> property on all log messages. In the following code, we set a hard-coded version number on all log messages, but the value could come from assembly info, a text file, or similar:</p>
<pre><code class="csharp">Hierarchy hier = log4net.LogManager.GetRepository() as Hierarchy;
var elmahIoAppender = (ElmahIoAppender)(hier?.GetAppenders())
    .FirstOrDefault(appender =&gt; appender.Name
        .Equals(&quot;ElmahIoAppender&quot;, StringComparison.InvariantCultureIgnoreCase));

elmahIoAppender.ActivateOptions();
elmahIoAppender.Client.Messages.OnMessage += (sender, a) =&gt;
{
    a.Message.Version = &quot;1.0.0&quot;;
};
</code></pre>

<p>This rather ugly piece of code would go into an initalization block, depending on the project type. The code starts by getting the configured elmah.io appender (typically set up in <code>web/app.config</code> or <code>log4net.config</code>). With the appender, you can access the underlying elmah.io client and subscribe to the <code>OnMessage</code> event. This let you trigger a small piece of code, just before sending log messages to elmah.io. In this case, we set the <code>Version</code> property to <code>1.0.0</code>. Remember to call the <code>ActiveOptions</code> method, to make sure that the <code>Client</code> property is initialized.</p>
<h2 id="specify-api-key-and-log-id-in-appsettings">Specify API key and log ID in appSettings</h2>
<p>You may prefer storing the API key and log ID in the <code>appSettings</code> element over having the values embedded into the <code>appender</code> element. This can be the case for easy config transformation, overwriting values on Azure, or similar. log4net provides a feature named pattern strings to address just that:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
  &lt;configSections&gt;
    &lt;section name=&quot;log4net&quot; type=&quot;log4net.Config.Log4NetConfigurationSectionHandler, log4net&quot; /&gt;
  &lt;/configSections&gt;
  &lt;appSettings&gt;
    &lt;add key=&quot;logId&quot; value=&quot;LOG_ID&quot;/&gt;
    &lt;add key=&quot;apiKey&quot; value=&quot;API_KEY&quot;/&gt;
  &lt;/appSettings&gt;
  &lt;log4net&gt;
    &lt;root&gt;
      &lt;level value=&quot;ALL&quot; /&gt;
      &lt;appender-ref ref=&quot;ElmahIoAppender&quot; /&gt;
    &lt;/root&gt;
    &lt;appender name=&quot;ElmahIoAppender&quot; type=&quot;elmah.io.log4net.ElmahIoAppender, elmah.io.log4net&quot;&gt;
      &lt;logId type=&quot;log4net.Util.PatternString&quot; value=&quot;%appSetting{logId}&quot; /&gt;
      &lt;apiKey type=&quot;log4net.Util.PatternString&quot; value=&quot;%appSetting{apiKey}&quot; /&gt;
    &lt;/appender&gt;
  &lt;/log4net&gt;
&lt;/configuration&gt;
</code></pre>

<p>The <code>logId</code> and <code>apiKey</code> elements underneath the elmah.io appender have been extended to include <code>type="log4net.Util.PatternString"</code>. This allows for complex patterns in the <code>value</code> attribute. In this example, I reference an app setting from its name, by adding a value of <code>%appSetting{logId}</code> where <code>logId</code> is a reference to the app setting key specified above.</p>
<h2 id="aspnet-core">ASP.NET Core</h2>
<p>Like other logging frameworks, logging through log4net from ASP.NET Core is also supported. We have a <a href="https://github.com/elmahio/elmah.io.log4net/tree/master/samples/Elmah.Io.Log4Net.AspNetCore22">sample</a> to show you how to set it up. The required NuGet packages and configuration are documented in this section.</p>
<p>To start logging to elmah.io from Microsoft.Extensions.Logging (through log4net), install the <code>Microsoft.Extensions.Logging.Log4Net.AspNetCore</code> NuGet package:</p>
<pre><code class="ps">Install-Package Microsoft.Extensions.Logging.Log4Net.AspNetCore
</code></pre>

<p>Include a log4net config file to the root of the project:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;log4net&gt;
  &lt;root&gt;
    &lt;level value=&quot;WARN&quot; /&gt;
    &lt;appender-ref ref=&quot;ElmahIoAppender&quot; /&gt;
    &lt;appender-ref ref=&quot;ConsoleAppender&quot; /&gt;
  &lt;/root&gt;
  &lt;appender name=&quot;ElmahIoAppender&quot; type=&quot;elmah.io.log4net.ElmahIoAppender, elmah.io.log4net&quot;&gt;
    &lt;logId value=&quot;LOG_ID&quot; /&gt;
    &lt;apiKey value=&quot;API_KEY&quot; /&gt;
    &lt;!--&lt;application value=&quot;My app&quot; /&gt;--&gt;
  &lt;/appender&gt;
  &lt;appender name=&quot;ConsoleAppender&quot; type=&quot;log4net.Appender.ConsoleAppender&quot;&gt;
    &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;
      &lt;conversionPattern value=&quot;%date [%thread] %-5level %logger [%property{NDC}] - %message%newline&quot; /&gt;
    &lt;/layout&gt;
  &lt;/appender&gt;
&lt;/log4net&gt;
</code></pre>

<p>In the <code>Program.cs</code> file, make sure to set up log4net:</p>
<pre><code class="csharp">public class Program
{
    public static void Main(string[] args)
    {
        CreateWebHostBuilder(args).Build().Run();
    }

    public static IWebHostBuilder CreateWebHostBuilder(string[] args) =&gt;
        WebHost.CreateDefaultBuilder(args)
            .ConfigureLogging((hostingContext, logging) =&gt;
            {
                logging.AddLog4Net();
            })
            .UseStartup&lt;Startup&gt;();
}
</code></pre>

<p>All internal logging from ASP.NET Core, as well as manual logging you create through the <code>ILogger</code> interface, now goes directly into elmah.io.</p>
<p>A common request is to include all of the HTTP contextual information you usually get logged when using a package like <code>Elmah.Io.AspNetCore</code>. We have developed a specialized NuGet package to include cookies, server variables, etc. when logging through log4net from ASP.NET Core. To set it up, install the <code>Elmah.Io.AspNetCore.Log4Net</code> NuGet package:</p>
<pre><code class="ps">Install-Package Elmah.Io.AspNetCore.Log4Net
</code></pre>

<p>Finally, make sure to call the <code>UseElmahIoLog4Net</code> method in the <code>Configure</code> method in the <code>Startup.cs</code> file:</p>
<pre><code class="csharp">public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)
{
    ... // Exception handling middleware
    app.UseElmahIoLog4Net();
    ... // UseMvc etc.
}
</code></pre>

            <br/>
            <p><small><em>This article was brought to you by the elmah.io team. elmah.io is the best error management system for .NET web applications. We monitor your website, alert you when errors start happening and help you fix errors fast.</em></small></p>
            <p class="text-center">
                <a href="https://app.elmah.io/signup/" class="btn btn-lg btn-primary d-none d-sm-block" style="white-space: normal;">See how we can help you monitor your website for crashes</a>
                <a href="https://app.elmah.io/signup/" class="btn btn-lg btn-primary d-block d-sm-none">Monitor your website</a>
            </p>
          </div>
        </article>
      </div>
    </div>

    <footer>
    	<div id="back-to-top" class="d-block d-sm-none"><span class="far fa-arrow-up"></span></div>
    	<div class="pre-footer">
	    	<div class="container">
	    		<div class="company-logo">
					<img class="img-fluid" src="../assets/img/elmahio.png" alt="elmah.io">
				</div>
				<a href="https://app.elmah.io/signup/" class="btn btn-primary float-right"><span>Sign Up Now</span><span class="info">no credit card required</span></a>
			</div>
	    </div>
    	<div class="links">
    		<div class="container">
    			<div class="row">
    				<div class="col">
    					<h5>Product</h5>
    					<ul class="list-unstyled">
							<li><a href="https://elmah.io/features/">Features</a></li>
							<li><a href="https://elmah.io/pricing/">Pricing</a></li>
						        <li><a href="https://elmah.io/tour/">Tour</a></li>
							<li><a href="https://elmah.io/features/appstore/">App Store</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Company</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/about/">About</a></li>
							<li><a href="https://elmah.io/contact/">Contact</a></li>
							<li><a href="https://blog.elmah.io/">Blog</a></li>
							<li><a href="https://docs.elmah.io/">Docs</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Learn</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/customer-stories/">Customer Stories</a></li>
							<li><a href="https://elmah.io/for-ctos/">For CEOs and CTOs</a></li>
							<li><a href="https://elmah.io/goodiebag/">Goodie Bag</a></li>
                                                        <li><a href="https://elmah.io/api/">API</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Guides</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/devops/">.NET DevOps</a></li>
							<li><a href="https://elmah.io/microservices/">.NET Microservices</a></li>
							<li><a href="https://elmah.io/cloud-logging/">.NET Cloud Logging</a></li>
							<li><a href="https://elmah.io/features/asp-net-core/">ASP.NET Core Error Logging</a></li>
						</ul>
    				</div>
    				<div class="col">
                        <h5>Online Tools</h5>
                        <ul class="list-unstyled">
                            <li><a href="https://elmah.io/tools/configvalidator/">Web.config Validator</a></li>
                            <li><a href="https://elmah.io/tools/stack-trace-formatter/">Stack Trace Formatter</a></li>
                            <li><a href="https://elmah.io/tools/webconfig-transformation-tester/">Web.config Transform Tester</a></li>
                        </ul>
                    </div>
    			</div>
    		</div>
    	</div>
    	<div class="copyright">
    		<div class="container">
    			<div class="row no-gutters">
                    <div class="col-lg-5 col-md-12 order-2 order-lg-1">
                        <div class="text-center text-lg-left">
        					<p>2013 - <script>document.write(new Date().getFullYear());</script> @ elmah.io. All Rights Reserved.</p>
        					<p><a href="https://elmah.io/legal/terms-of-use/">Terms of Use</a> | <a href="https://elmah.io/legal/privacy-policy/">Privacy Policy</a> | <a href="https://elmah.io/legal/refund-policy/">Refund Policy</a></p>
        				</div>
                    </div>
                    <div class="col-lg-2 col-md-12 order-3 order-lg-1">
                        <ul class="list-unstyled social mb-0">
                            <li class="list-inline-item"><a href="https://twitter.com/elmah_io"><i class="fab fa-twitter"></i></a></li>
                            <li class="list-inline-item"><a href="https://facebook.com/elmahdotio"><i class="fab fa-facebook-f"></i></a></li>
                            <li class="list-inline-item"><a href="https://www.linkedin.com/company/elmah-io/"><i class="fab fa-linkedin-in"></i></a></li>
                        </ul>
                    </div>
                    <div class="col-lg-5 col-md-12 order-1 order-lg-2">
                        <div class="footer-badges text-center text-lg-right">
                            <a href="https://elmah.io/security/"><img src="../assets/img/pcicompliant.png" draggable="false" alt="PCI Compliant" /></a>
                            <a href="https://elmah.io/security/"><img src="../assets/img/gdpr.png" draggable="false" alt="GDPR Compliant" /></a>
                            <a href="https://elmah.io/security/"><img src="../assets/img/shieldssl.png" draggable="false" alt="Alpha SSL" /></a>
                        </div>
                    </div>
                </div>
    		</div>
    	</div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/gh/elmahio/elmah.io.javascript@3.0.0/dist/elmahio.min.js?apiKey=a789ddece0bd47fe83390b702f5713a9&logId=24c89075-e32a-4a79-9f7e-e78381e0d761" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="../assets/js/bootstrap.min.js"></script>
    <script src="../assets/js/highlight.pack.js"></script>
    <script src="../assets/js/fuse.min.js"></script>
    <script src="../assets/js/jquery.fancybox.min.js"></script>
    <script src="../assets/js/clipboard.min.js"></script>
    <script src="../assets/js/main.js"></script>
  </body>
</html>