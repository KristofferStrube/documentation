<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <meta name="author" content="Thomas Ardal">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@elmah_io">
    <meta name="twitter:creator" content="@elmah_io">
    <meta name="twitter:title" content="Logging from Azure WebJobs">
    
    
    <meta property="og:title" content="Logging from Azure WebJobs">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.elmah.io/logging-to-elmah-io-from-azure-webjobs/">
    
    <meta property="fb:app_id" content="218008838347208" />

    <title>Logging from Azure WebJobs | elmah.io</title>

    <link rel="canonical" href="https://docs.elmah.io/logging-to-elmah-io-from-azure-webjobs/">
    <link rel="shortcut icon" href="../favicon.ico">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/fonts/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" href="../assets/css/highlight.css">
    <link rel="stylesheet" href="../assets/css/style.css">
  </head>
  <body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WKDV74"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WKDV74');</script>
    <!-- End Google Tag Manager -->

    <!-- Navigation -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="https://elmah.io/">
      <img src="../assets/img/logo.png" alt="elmah.io">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/features/">Features</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/about/">About</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/pricing/">Pricing</a></li>
        <li class="nav-item"><a class="nav-link" href="https://docs.elmah.io/">Docs</a></li>
        <li class="nav-item"><a class="nav-link" href="https://blog.elmah.io/">Blog</a></li>
      </ul>
      <ul class="navbar-signin">
        <li class="hidden-xs"><span class="navbar-text">Sign in:</span></li>
        <li><a href="https://elmah.io/authentication/redirect/Twitter"><i class="fa fa-twitter"></i></a></li>
        <li><a href="https://elmah.io/authentication/redirect/Facebook"><i class="fa fa-facebook"></i></a></li>
        <li><a href="https://elmah.io/authentication/redirect/Google"><i class="fa fa-google-plus"></i></a></li>
        <li><a href="https://elmah.io/authentication/redirect/windowslive"><i class="fa fa-windows"></i></a></li>
      </ul>
    </div>
  </div>
</nav>

    <div class="container mb-5">
      <div class="row">
        <aside class="sidebar">
          <div class="sidebar-body">
            <div class="input-group mb-3">
              <div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-search"></i></span></div>
              <input type="text" id="search" class="form-control" placeholder="Search ..." />
            </div>
            <div id="searchList"></div>
            <hr>
            <a id="show-all-links" href="javascript:;" class="btn btn-light btn-block d-block d-md-none">Show documentation links</a>
            <ul class="main-nav d-none d-md-block">
              
              <li>
                <a href="javascript:;">Docs</a>
                <ul>
                  
                  <li ><a href="..">Home</a></li>
                  
                </ul>
              </li>
              
              <li>
                <a href="javascript:;">Installation</a>
                <ul>
                  
                  <li ><a href="../logging-to-elmah-io-from-elmah/">Logging from ELMAH</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aspnet-mvc/">Logging from ASP.NET MVC</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-web-api/">Logging from Web API</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aspnet-core/">Logging from ASP.NET Core</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-serilog/">Logging from Serilog</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-log4net/">Logging from log4net</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-nlog/">Logging from NLog</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-entity-framework-core/">Logging from Entity Framework Core</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-logary/">Logging from Logary</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-nancy/">Logging from Nancy</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-servicestack/">Logging from ServiceStack</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-blogengine-net/">Logging from BlogEngine.NET</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-umbraco/">Logging from Umbraco</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-jsnlog/">Logging from JSNLog</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-console-application/">Logging from Console</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-system-diagnostics/">Logging from System.Diagnostics</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-powershell/">Logging from PowerShell</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-sitefinity/">Logging from Sitefinity</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-express/">Logging from Express</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-wcf/">Logging from WCF</a></li>
                  
                  <li class="active"><a href="./">Logging from Azure WebJobs</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-azure-functions/">Logging from Azure Functions</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-aws-lambdas/">Logging from AWS Lambdas</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-devexpress/">Logging from DevExpress (eXpressApp Framework)</a></li>
                  
                  <li ><a href="../logging-to-elmah-io-from-orchard/">Logging from Orchard</a></li>
                  
                  <li ><a href="../configure-elmah-io-manually/">Configure elmah.io manually</a></li>
                  
                  <li ><a href="../configure-elmah-io-from-code/">Configure elmah.io from code</a></li>
                  
                  <li ><a href="../logging-through-a-http-proxy/">Logging through a HTTP proxy</a></li>
                  
                </ul>
              </li>
              
              <li>
                <a href="javascript:;">Apps</a>
                <ul>
                  
                  <li ><a href="../elmah-io-apps-slack/">Slack</a></li>
                  
                  <li ><a href="../elmah-io-apps-hipchat/">HipChat</a></li>
                  
                  <li ><a href="../elmah-io-apps-github/">GitHub</a></li>
                  
                  <li ><a href="../elmah-io-apps-bitbucket/">Bitbucket</a></li>
                  
                  <li ><a href="../elmah-io-apps-jira/">Jira</a></li>
                  
                  <li ><a href="../elmah-io-apps-teams/">Microsoft Teams</a></li>
                  
                  <li ><a href="../elmah-io-apps-botbuster/">BotBuster</a></li>
                  
                  <li ><a href="../elmah-io-apps-ipfilter/">IP Filter</a></li>
                  
                  <li ><a href="../elmah-io-apps-mailman/">Mailman</a></li>
                  
                  <li ><a href="../elmah-io-apps-webclient/">WebClient</a></li>
                  
                  <li ><a href="../elmah-io-apps-youtrack/">YouTrack</a></li>
                  
                  <li ><a href="../elmah-io-apps-gitlab/">GitLab</a></li>
                  
                  <li ><a href="../creating-apps-for-elmah-io/">Creating apps for elmah.io</a></li>
                  
                </ul>
              </li>
              
              <li>
                <a href="javascript:;">Help</a>
                <ul>
                  
                  <li ><a href="../tips-and-tricks-to-stay-below-your-message-limit/">Tips and tricks to stay below your message limit</a></li>
                  
                  <li ><a href="../logging-custom-data/">Logging custom data</a></li>
                  
                  <li ><a href="../logging-errors-programmatically/">Logging errors programmatically</a></li>
                  
                  <li ><a href="../logging-to-multiple-elmah-logs/">Logging to multiple logs</a></li>
                  
                  <li ><a href="../remove-sensitive-form-data/">Remove sensitive form data</a></li>
                  
                  <li ><a href="../setup-deployment-tracking/">Set Up Deployment Tracking</a></li>
                  
                  <li ><a href="../managing-organisations-and-users/">Managing Organisations and Users</a></li>
                  
                  <li ><a href="../handle-elmah-io-downtime/">Handle elmah.io downtime</a></li>
                  
                  <li ><a href="../use-extended-user-details-without-email-as-id/">Use Extended User Details without Email as Id</a></li>
                  
                  <li ><a href="../use-multiple-logs-for-different-environments/">Use multiple logs for different environments</a></li>
                  
                  <li ><a href="../specify-api-key-and-log-id-through-appsettings/">Specify API key and log ID through appSettings</a></li>
                  
                  <li ><a href="../adding-version-information/">Adding version information</a></li>
                  
                  <li ><a href="../include-filename-and-line-number-in-stacktraces/">Include filename and like number in stack traces</a></li>
                  
                  <li ><a href="../elmah-and-custom-errors/">ELMAH and custom errors</a></li>
                  
                  <li ><a href="../using-the-elmah-io-extension-for-visual-studio/">Using the elmah.io extension for Visual Studio</a></li>
                  
                  <li ><a href="../using-the-rest-api/">Using the REST API</a></li>
                  
                  <li ><a href="../creating-rules-to-perform-actions-on-messages/">Creating Rules to Perform Actions on Messages</a></li>
                  
                  <li ><a href="../query-messages-using-full-text-search/">Query messages using full-text search</a></li>
                  
                  <li ><a href="../where-is-my-log-id/">Where is my log ID</a></li>
                  
                  <li ><a href="../where-is-my-api-key/">Where is my API key</a></li>
                  
                  <li ><a href="../missing-server-side-information-on-uptime-errors/">Missing server side information on uptime errors</a></li>
                  
                  <li ><a href="../export-data-from-elmah-io-to-json/">Export data from elmah.io to JSON</a></li>
                  
                  <li ><a href="../upgrade-elmah-io-from-v2-to-v3/">Upgrade elmah.io from v2 to v3</a></li>
                  
                  <li ><a href="../elmah-and-elmah-io-differences/">ELMAH and elmah.io differences</a></li>
                  
                  <li ><a href="../integrate-elmah-io-with-slack/">Integrating with Slack manually</a></li>
                  
                  <li ><a href="../integrate-elmah-io-with-hipchat/">Integrating with HipChat manually</a></li>
                  
                  <li ><a href="../integrate-elmah-io-with-zapier/">Integrating with Zapier</a></li>
                  
                </ul>
              </li>
              
            </ul>
          </div>
        </aside>
        <article class="col main-content">
          <div class="main-content-body">

            <p><a href="https://ci.appveyor.com/project/ThomasArdal/elmah-io-functions"><img alt="Build status" src="https://ci.appveyor.com/api/projects/status/wijhscta71muvd5b?svg=true" /></a>
<a href="https://www.nuget.org/packages/Elmah.Io.Functions"><img alt="NuGet" src="https://img.shields.io/nuget/v/Elmah.Io.Functions.svg" /></a>
<a href="https://github.com/elmahio/Elmah.Io.Functions/tree/master/samples"><img alt="Samples" src="https://img.shields.io/badge/samples-3-brightgreen.svg" /></a></p>
<h1 id="logging-to-elmahio-from-azure-webjobs">Logging to elmah.io from Azure WebJobs</h1>
<p>Logging errors from <a href="https://elmah.io/features/azure-functions/">Azure WebJobs</a>, requires only a few lines of code. To start logging exceptions from WebJobs, choose one of two methods:</p>
<h3 id="manually-using-elmahioclient-the-stable-choice">Manually using <code>Elmah.Io.Client</code> (the stable choice)</h3>
<p>Install the <a href="https://www.nuget.org/packages/elmah.io.client/">Elmah.Io.Client</a> NuGet package into your WebJob project:</p>
<pre><code class="powershell">Install-Package Elmah.Io.Client
</code></pre>

<p>Add the following code to your <code>Program.cs</code> file:</p>
<pre><code class="csharp">class Program
{
    static void Main()
    {
        AppDomain.CurrentDomain.UnhandledException += Log;
        ...
    }

    private static void Log(object sender, UnhandledExceptionEventArgs e)
    {
        var exception = e.ExceptionObject as Exception;
        if (exception != null)
        {
            var logger = ElmahioAPI.Create(&quot;API_KEY&quot;);
            client.Messages.Error(new Guid(&quot;LOG_ID&quot;), exception, &quot;An error message&quot;);
        }
    }
}
</code></pre>

<p>Remember to replace <code>API_KEY</code> with your API key (<a href="https://docs.elmah.io/where-is-my-api-key/">Where is my API key?</a>) and <code>LOG_ID</code> (<a href="https://docs.elmah.io/where-is-my-log-id/">Where is my log ID?</a>) with the ID of the log you want to log to.</p>
<p>Azure WebJobs automatically executes the <code>Log</code>-method when an exception is thrown. In this example, we simply log the exception registered in <code>UnhandledExceptionEventArgs</code>.</p>
<h3 id="automatic-using-elmahiofunctions-the-prerelease-choice">Automatic using <code>Elmah.Io.Functions</code> (the prerelease choice)</h3>
<p>We've created a client specifically for Azure WebJobs. Install the <a href="https://www.nuget.org/packages/elmah.io.functions/">Elmah.Io.Functions</a> package:</p>
<pre><code class="powershell">Install-Package Elmah.Io.Functions -Pre
</code></pre>

<p>Log all uncaught exceptions using the <code>ElmahIoExceptionFilter</code> attribute:</p>
<pre><code class="csharp">[ElmahIoExceptionFilter(&quot;API_KEY&quot;, &quot;LOG_ID&quot;)]
public class Functions
{
    public static void ProcessQueueMessage([QueueTrigger(&quot;queue&quot;)] string msg, TextWriter log)
    {
        throw new Exception(&quot;Some exception&quot;);
    }
}
</code></pre>

<p>Replace <code>API_KEY</code> with your API key (<a href="https://docs.elmah.io/where-is-my-api-key/">Where is my API key?</a>) and <code>LOG_ID</code> (<a href="https://docs.elmah.io/where-is-my-log-id/">Where is my log ID?</a>) with your log ID.</p>
<blockquote>
<p>If your WebJob method is declared as async, remember to change the return type to <code>Task</code>. Without it, <code>ElmahIoExceptionFilter</code> is never invoked.</p>
</blockquote>
<p>The filter also supports config variables:</p>
<pre><code class="csharp">[ElmahIoExceptionFilter(&quot;%apiKey%&quot;, &quot;%logId%&quot;)]
</code></pre>

<p>The variables above, would require you to add your API key and log ID to your <code>App.config</code>:</p>
<pre><code class="xml">&lt;configuration&gt;
  &lt;appSettings&gt;
    &lt;add key=&quot;apiKey&quot; value=&quot;API_KEY&quot;/&gt;
    &lt;add key=&quot;logId&quot; value=&quot;LOG_ID&quot;/&gt;
  &lt;/appSettings&gt;
&lt;/configuration&gt;
</code></pre>

            <br/>
            <p><small><em>This article was brought to you by the elmah.io team. elmah.io is the best error management system for .NET web applications. We monitor your website, alert you when errors start happening and help you fix errors fast.</em></small></p>
            <p class="text-center">
                <a href="https://elmah.io/pricing/" class="btn btn-lg btn-primary d-none d-sm-block" style="white-space: normal;">See how we can help you monitor your website for crashes</a>
                <a href="https://elmah.io/pricing/" class="btn btn-lg btn-primary d-block d-sm-none">Monitor your website</a>
            </p>
          </div>
        </article>
      </div>
    </div>

    <footer>
    	<div class="pre-footer">
	    	<div class="container">
	    		<div class="company-logo">
					<img class="img-fluid" src="../assets/img/elmahio.png" alt="elmah.io">
				</div>
				<a href="https://elmah.io/pricing/" class="btn btn-primary float-right"><span>Sign Up Now</span><span class="info">no credit card required</span></a>
			</div>
	    </div>
    	<div class="links">
    		<div class="container">
    			<div class="row">
    				<div class="col">
    					<h5>Product</h5>
    					<ul class="list-unstyled">
							<li><a href="https://elmah.io/features/">Features</a></li>
							<li><a href="https://elmah.io/pricing/">Pricing</a></li>
							<li><a href="https://elmah.io/api">API</a></li>
							<li><a href="https://headwayapp.co/elmah-io-changelog" rel="noopener noreferrer" target="_blank">Changelog</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Company</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/about/">About</a></li>
							<li><a href="https://elmah.io/contact/">Contact</a></li>
							<li><a href="https://blog.elmah.io/">Blog</a></li>
							<li><a href="https://docs.elmah.io/">Docs</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Learn</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/customer-stories/">Customer Stories</a></li>
							<li><a href="https://elmah.io/for-ctos/">For CEOs and CTOs</a></li>
							<li><a href="https://elmah.io/goodiebag/">Goodie Bag</a></li>
							<li><a href="https://elmah.io/tools/">Free Tools</a></li>
						</ul>
    				</div>
    				<div class="col">
    					<h5>Guides</h5>
						<ul class="list-unstyled">
							<li><a href="https://elmah.io/devops/">.NET DevOps</a></li>
							<li><a href="https://elmah.io/microservices/">.NET Microservices</a></li>
							<li><a href="https://elmah.io/cloud-logging/">.NET Cloud Logging</a></li>
						</ul>
    				</div>
                    <div class="col">
                        <h5>Social</h5>
                        <ul class="list-unstyled social">
                            <li class="list-inline-item"><a href="https://twitter.com/elmah_io"><i class="fa fa-twitter"></i></a></li>
                            <li class="list-inline-item"><a href="https://facebook.com/elmahdotio"><i class="fa fa-facebook"></i></a></li>
                            <li class="list-inline-item"><a href="https://plus.google.com/+ElmahIoPlus"><i class="fa fa-google-plus"></i></a></li>
                            <li class="list-inline-item"><a href="https://www.linkedin.com/company/5354798"><i class="fa fa-linkedin"></i></a></li>
                        </ul>
                    </div>
    			</div>
    		</div>
    	</div>
    	<div class="copyright">
    		<div class="container">
    			<div class="text-center">
					<p>2013 - 2018 @ elmah.io. All Rights Reserved.</p>
					<p><a href="https://elmah.io/termsofuse/">Terms of Use</a> | <a href="https://elmah.io/legal/privacy-policy/">Privacy Policy</a> | <a href="https://elmah.io/legal/refund-policy/">Refund Policy</a></p>
				</div>
    		</div>
    	</div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="../assets/js/bootstrap.min.js"></script>
    <script src="../assets/js/highlight.pack.js"></script>
    <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="../assets/js/fuse.min.js"></script>
    <script src="../assets/js/main.js"></script>
  </body>
</html>