<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,100,700" media="all">
        
        
        
        <link rel="shortcut icon" href="../favicon.ico">
        

	<title>Logging to multiple logs - elmah.io Documentation</title>

        <link href="/../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="/../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="/../css/base.css" rel="stylesheet">
        <link href="/../style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
        <script src="/js/search.js"></script>
        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-42575460-4', 'docs.elmah.io');
            ga('send', 'pageview');
        </script>
        
        <script src="/../js/jquery-1.10.2.min.js"></script>
    </head>

    <body>
		
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="https://elmah.io/">elmah.io</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
                <li><a href="https://elmah.io/features/" id="NavFeatures">Features</a></li>
                <li><a href="https://elmah.io/about/" id="NavAbout">About</a></li>
                <li><a href="https://elmah.io/pricing/" id="NavPricing">Pricing</a></li>
                <li><a href="http://docs.elmah.io/" id="NavDocs">Docs</a></li>
                <li><a href="http://blog.elmah.io/" id="NavBlog">Blog</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                    <li class="visible-xs">
                        <a href="/authentication/redirect/Twitter" class="pull-left"><span class="fa fa-twitter icon-2x"></span></a>
                        <a href="/authentication/redirect/Facebook" class="pull-left"><span class="fa fa-facebook icon-2x"></span></a>
                        <a href="/authentication/redirect/Google" class="pull-left"><span class="fa fa-google-plus icon-2x"></span></a>
                        <a href="/authentication/redirect/windowslive" class="pull-left"><span class="fa fa-windows icon-2x"></span></a>
                    </li>
                    <li class="hidden-xs"><span class="navbar-text text-muted">Sign in:</span></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/Twitter"><span class="fa fa-twitter"></span></a></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/Facebook"><span class="fa fa-facebook"></span></a></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/Google"><span class="fa fa-google-plus"></span></a></li>
                    <li class="hidden-xs"><a href="https://elmah.io//authentication/redirect/windowslive"><span class="fa fa-windows"></span></a></li>
                </ul>
        </div>
    </div>
</div>

        <div class="container">
            
		
            <div class="col-md-3"><div class="bs-sidebar hidden-print" role="complementary">
	
    <div class="icon-in-input">
        <input type="text" class="form-control" id="search" onclick="initSearchFunctionality()"/>
        <button type="button" class="fa fa-search"></button>
    </div>
    <h4 id="searchResultHeader">Search result</h4>
    <div id="searchResult">
    <ul class="nav bs-sidenav">
    </ul>
    <hr/>
    </div>
	
    
			<h4 href="#" >Docs</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="..">Home</a>
				</li>
			
			</ul>
	
    
			<h4 href="#" >Installation</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="../logging-to-elmah-io-from-elmah/">Logging from ELMAH</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-web-api/">Logging from Web API</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-serilog/">Logging from Serilog</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-log4net/">Logging from log4net</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-nlog/">Logging from NLog</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-nancy/">Logging from Nancy</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-servicestack/">Logging from ServiceStack</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-blogengine-net/">Logging from BlogEngine.NET</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-umbraco/">Logging from Umbraco</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-jsnlog/">Logging from JSNLog</a>
				</li>
			
				<li >
					<a href="../logging-to-elmah-io-from-console-application/">Logging from Console</a>
				</li>
			
				<li >
					<a href="../configure-elmah-io-from-code/">Configure elmah.io from code</a>
				</li>
			
			</ul>
	
    
			<h4 href="#" >Integrations</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="../integrate-elmah-io-with-slack/">Slack</a>
				</li>
			
				<li >
					<a href="../integrate-elmah-io-with-hipchat/">HipChat</a>
				</li>
			
				<li >
					<a href="../integrate-elmah-io-with-zapier/">Zapier</a>
				</li>
			
			</ul>
	
    
			<h4 href="#" >Help</h4>
			<ul class="nav bs-sidenav">
			
				<li >
					<a href="../logging-custom-data/">Logging custom data</a>
				</li>
			
				<li >
					<a href="../logging-errors-programmatically/">Logging errors programmatically</a>
				</li>
			
				<li >
					<a href="../logging-through-a-http-proxy/">Logging through a HTTP proxy</a>
				</li>
			
				<li class="active">
					<a href="./">Logging to multiple logs</a>
				</li>
			
				<li >
					<a href="../remove-sensitive-form-data/">Remove sensitive form data</a>
				</li>
			
				<li >
					<a href="../use-extended-user-details-without-email-as-id/">Use Extended User Details without Email as Id</a>
				</li>
			
				<li >
					<a href="../use-multiple-logs-for-different-environments/">Use multiple logs for different environments</a>
				</li>
			
			</ul>
	
</div></div>
            <div class="col-md-9" role="main" style="border-left: 1px solid #eee;">

<h1 id="logging-to-multiple-logs">Logging to multiple logs</h1>
<p>Unfortunately, ELMAH doesn’t support multiple log targets like other logging frameworks like Serilog. This makes logging to multiple logs a bit tricky, but no way impossible. Let’s say that you’re using ELMAH in your web application and configured it to log everything in SQL Server. If you look through your <code>web.config</code> file, you will have code looking like this somewhere:</p>
<pre><code class="xml">&lt;elmah&gt;
    &lt;errorLog type=&quot;Elmah.SqlErrorLog, Elmah&quot; connectionStringName=&quot;elmah&quot;/&gt;
&lt;/elmah&gt;
</code></pre>

<p>As you probably know, this tells ELMAH to log all uncatched errors in SQL Server with the connection string “elmah”. You cannot add more <code>&lt;errorLog&gt;</code> elements, why logging to a second log seems impossible. Meet ELMAH’s Logged event, which is a great hook to log to multiple targets. Install the <a href="http://www.nuget.org/packages/elmah.io.core/">elmah.io.core</a> NuGet package and add the following code to your <code>global.asax.cs</code> file:</p>
<pre><code class="csharp">void ErrorLog_Logged(object sender, ErrorLoggedEventArgs args)
{
    var elmahIoLog = new Elmah.Io.ErrorLog(new Logger(new Guid(&quot;insert your log id&quot;)));
    elmahIoLog.Log(args.Entry.Error);
}
</code></pre>

<p>In the above code, we listen for the Logged event by simply declaring a method named <code>ErrorLog_Logged</code>. When called we create a new (Elmah.Io.)ErrorLog instance with the GUID of your log at elmah.io. Next we simply call the Log method with a new Error object. Bam! The error is logged both in SQL Server and in elmah.io.</p>
<p>If you only want to log certain types of errors in elmah.io, but everything to your normal log, you can extend your code like this:</p>
<pre><code class="csharp">void ErrorLog_Logged(object sender, ErrorLoggedEventArgs args)
{
    if (args.Entry.Error.StatusCode == 500)
    {
        var elmahIoLog = new Elmah.Io.ErrorLog(new Logger(new Guid(&quot;insert your log id&quot;)));
        elmahIoLog.Log(args.Entry.Error);
    }
}
</code></pre>

<p>This time we only begin logging to elmah.io, if the thrown exception is of type <code>HttpException</code> and contains a HTTP status code of <code>500</code>. This example only logs errors with status code 500 in elmah.io and all errors in your normal error log. If you want to create this filter on all logs, you should use the <code>ErrorLog_Filtering</code> method instead. This method is called before <code>ErrorLog_Logged</code> and before actually logging the error to your normal error log.</p>


<br/><br/>
<h2>Comments</h2>
<hr/>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'elmahioblog';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div>
		
		
			
        </div>

    <footer class="col-md-12">
        
    </footer>


        <script src="/../js/bootstrap-3.0.3.min.js"></script>
        <script src="/../js/highlight.pack.js"></script>
        <script src="/../js/base.js"></script>
    </body>
</html>