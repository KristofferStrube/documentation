<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,100,700" media="all">
        
        
        
        <link rel="shortcut icon" href="../favicon.ico">
        

	<title>Logging from Nancy - elmah.io Documentation</title>

        <link href="../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">
        <link href="../style.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="https://elmah.io/">elmah.io</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
                <li><a href="https://elmah.io/features/" id="NavFeatures">Features</a></li>
                <li><a href="https://elmah.io/about/" id="NavAbout">About</a></li>
                <li><a href="https://elmah.io/pricing/" id="NavPricing">Pricing</a></li>
                <li><a href="http://blog.elmah.io/" id="NavBlog">Blog</a></li>
                <li><a href="#" id="NavDocs">Docs</a></li>
            </ul>

        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix" role="complementary">
	
		<h4 href="#" >Start</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="..">Welcome</a>
			</li>
		
		</ul>
	
		<h4 href="#" >Installation</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../Logging%20to%20elmah.io%20from%20ELMAH/">Logging from ELMAH</a>
			</li>
		
			<li >
				<a href="../Logging%20to%20elmah.io%20from%20Web%20API/">Logging from Web API</a>
			</li>
		
			<li >
				<a href="../Logging%20to%20elmah.io%20from%20Serilog/">Logging from Serilog</a>
			</li>
		
			<li >
				<a href="../Logging%20to%20elmah.io%20from%20log4net/">Logging from log4net</a>
			</li>
		
			<li >
				<a href="../Logging%20to%20elmah.io%20from%20NLog/">Logging from NLog</a>
			</li>
		
			<li class="active">
				<a href="./">Logging from Nancy</a>
			</li>
		
			<li >
				<a href="../Logging%20to%20elmah.io%20from%20ServiceStack/">Logging from ServiceStack</a>
			</li>
		
			<li >
				<a href="../Logging%20to%20elmah.io%20from%20BlogEngine.NET/">Logging from BlogEngine.NET</a>
			</li>
		
			<li >
				<a href="../Configure%20elmah.io%20from%20code/">Configure elmah.io from code</a>
			</li>
		
		</ul>
	
		<h4 href="#" >Integrations</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../Integrate%20with%20Slack/">Slack</a>
			</li>
		
			<li >
				<a href="../Integrate%20with%20HipChat/">HipChat</a>
			</li>
		
			<li >
				<a href="../Integrate%20with%20Zapier/">Zapier</a>
			</li>
		
		</ul>
	
		<h4 href="#" >Help</h4>
		<ul class="nav bs-sidenav">
		
			<li >
				<a href="../Logging%20custom%20data/">Logging custom data</a>
			</li>
		
			<li >
				<a href="../Logging%20errors%20programmatically/">Logging errors programmatically</a>
			</li>
		
			<li >
				<a href="../Logging%20through%20a%20HTTP%20proxy/">Logging through a HTTP proxy</a>
			</li>
		
			<li >
				<a href="../Logging%20to%20multiple%20ELMAH%20logs/">Logging to multiple logs</a>
			</li>
		
			<li >
				<a href="../Remove%20sensitive%20form%20data/">Remove sensitive form data</a>
			</li>
		
			<li >
				<a href="../Use%20Extended%20User%20Details%20without%20Email%20as%20Id/">Use Extended User Details without Email as Id</a>
			</li>
		
			<li >
				<a href="../Use%20multiple%20logs%20for%20different%20environments/">Use multiple logs for different environments</a>
			</li>
		
		</ul>
	
</div></div>
            <div class="col-md-9" role="main">

<h1 id="logging-from-nancy">Logging from Nancy</h1>
<p>As with MVC and WebAPI, Nancy already provides ELMAH support out of the box. Start by installing the elmah.io NuGet package:</p>
<pre><code class="powershell">Install-Package elmah.io
</code></pre>

<p>To integrate Nancy and ELMAH, Christian Westman already did a great job with his Nancy.Elmah project. Install it using NuGet:</p>
<pre><code class="powershell">Install-Package Nancy.Elmah
</code></pre>

<p>Itâ€™s important that you install the elmah.io package before Nancy.Elmah, because both packages likes to add the ELMAH configuration to the web.config file. If you install it the other way around, you will need to add the elmah.io ErrorLog element manually.</p>
<p>In order for Nancy to know how to log errors to Elmah, you need to add an override of the DefaultNancyBootstrapper. Create a new class in the root named Bootstrapper:</p>
<pre><code class="csharp">using Nancy;
using Nancy.Bootstrapper;
using Nancy.Elmah;
using Nancy.TinyIoc;

namespace Elmah.Io.NancyExample
{
    public class Bootstrapper : DefaultNancyBootstrapper
    {
        protected override void ApplicationStartup(TinyIoCContainer container, IPipelines pipelines)
        {
            base.ApplicationStartup(container, pipelines);
            Elmahlogging.Enable(pipelines, &quot;elmah&quot;);
        }
    }
}
</code></pre>

<p>The important thing in the code sample is line 13, where we tell Nancy.Elmah to hook into the pipeline of Nancy in order for it to catch and log HTTP errors. The second parameter for the Enable-method, lets us define a URL for the ELMAH error page, which can be used as an alternative to elmah.io for quick viewing of errors.</p></div>
        </div>

    <footer class="col-md-12">
        
    </footer>


        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>